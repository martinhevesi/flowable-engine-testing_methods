<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CaseDefinitionQueryTest.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">jacoco.exec</a> &gt; <a href="index.source.html" class="el_package">org.flowable.cmmn.test.repository</a> &gt; <span class="el_source">CaseDefinitionQueryTest.java</span></div><h1>CaseDefinitionQueryTest.java</h1><pre class="source lang-java linenums">/* Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.flowable.cmmn.test.repository;

import static org.assertj.core.api.Assertions.assertThat;
import static org.assertj.core.api.Assertions.assertThatThrownBy;
import static org.assertj.core.api.Assertions.tuple;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.HashSet;
import java.util.List;

import org.flowable.cmmn.api.repository.CaseDefinition;
import org.flowable.cmmn.api.repository.CmmnDeployment;
import org.flowable.cmmn.engine.CaseDefinitionLocalizationManager;
import org.flowable.cmmn.engine.test.FlowableCmmnTestCase;
import org.flowable.common.engine.api.FlowableIllegalArgumentException;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;

/**
 * @author Joram Barrez
 * @author Filip Hrisafov
 */
<span class="nc" id="L38">public class CaseDefinitionQueryTest extends FlowableCmmnTestCase {</span>

    private String deploymentId1;
    private String deploymentId2;
    private String deploymentId3;

    @Before
    public void deployTestDeployments() {
<span class="nc" id="L46">        this.deploymentId1 = cmmnRepositoryService.createDeployment()</span>
<span class="nc" id="L47">                .addClasspathResource(&quot;org/flowable/cmmn/test/repository/simple-case.cmmn&quot;)</span>
<span class="nc" id="L48">                .addClasspathResource(&quot;org/flowable/cmmn/test/repository/simple-case2.cmmn&quot;)</span>
<span class="nc" id="L49">                .deploy()</span>
<span class="nc" id="L50">                .getId();</span>

        // v2 of simple-case
<span class="nc" id="L53">        this.deploymentId2 = cmmnRepositoryService.createDeployment()</span>
<span class="nc" id="L54">                .addClasspathResource(&quot;org/flowable/cmmn/test/repository/simple-case.cmmn&quot;)</span>
<span class="nc" id="L55">                .deploy()</span>
<span class="nc" id="L56">                .getId();</span>

        // v3 of simple-case
<span class="nc" id="L59">        this.deploymentId3 = cmmnRepositoryService.createDeployment()</span>
<span class="nc" id="L60">                .addClasspathResource(&quot;org/flowable/cmmn/test/repository/simple-case.cmmn&quot;)</span>
<span class="nc" id="L61">                .deploy()</span>
<span class="nc" id="L62">                .getId();</span>
<span class="nc" id="L63">    }</span>

    @After
    public void deleteTestDeployments() {
<span class="nc" id="L67">        List&lt;CmmnDeployment&gt; deployments = cmmnRepositoryService.createDeploymentQuery().list();</span>
<span class="nc bnc" id="L68" title="All 2 branches missed.">        for (CmmnDeployment cmmnDeployment : deployments) {</span>
<span class="nc" id="L69">            cmmnRepositoryService.deleteDeployment(cmmnDeployment.getId(), true);</span>
<span class="nc" id="L70">        }</span>
<span class="nc" id="L71">    }</span>

    @Test
    public void testQueryNoParams() {
<span class="nc" id="L75">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().list()).hasSize(4);</span>
<span class="nc" id="L76">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().count()).isEqualTo(4);</span>
<span class="nc" id="L77">    }</span>

    @Test
    public void testQueryByDeploymentId() {
<span class="nc" id="L81">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentId(deploymentId1).list()).hasSize(2);</span>
<span class="nc" id="L82">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentId(deploymentId1).count()).isEqualTo(2);</span>

<span class="nc" id="L84">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentId(deploymentId2).list()).hasSize(1);</span>
<span class="nc" id="L85">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentId(deploymentId2).count()).isEqualTo(1);</span>

<span class="nc" id="L87">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentId(deploymentId3).list()).hasSize(1);</span>
<span class="nc" id="L88">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentId(deploymentId3).count()).isEqualTo(1);</span>
<span class="nc" id="L89">    }</span>

    @Test
    public void testQueryByInvalidDeploymentId() {
<span class="nc" id="L93">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentId(&quot;invalid&quot;).list()).isEmpty();</span>
<span class="nc" id="L94">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentId(&quot;invalid&quot;).count()).isZero();</span>
<span class="nc" id="L95">    }</span>

    @Test
    public void testQueryByDeploymentIds() {
<span class="nc" id="L99">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentIds(new HashSet&lt;&gt;(Arrays.asList(deploymentId1, deploymentId2, deploymentId3)))</span>
<span class="nc" id="L100">                .list()).hasSize(4);</span>
<span class="nc" id="L101">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentIds(new HashSet&lt;&gt;(Arrays.asList(deploymentId1, deploymentId2, deploymentId3)))</span>
<span class="nc" id="L102">                .count()).isEqualTo(4);</span>

<span class="nc" id="L104">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentIds(new HashSet&lt;&gt;(Collections.singletonList(deploymentId1))).list()).hasSize(2);</span>
<span class="nc" id="L105">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentIds(new HashSet&lt;&gt;(Collections.singletonList(deploymentId1))).count())</span>
<span class="nc" id="L106">                .isEqualTo(2);</span>

<span class="nc" id="L108">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentIds(new HashSet&lt;&gt;(Arrays.asList(deploymentId2, deploymentId3))).list())</span>
<span class="nc" id="L109">                .hasSize(2);</span>
<span class="nc" id="L110">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentIds(new HashSet&lt;&gt;(Arrays.asList(deploymentId2, deploymentId3))).count())</span>
<span class="nc" id="L111">                .isEqualTo(2);</span>

<span class="nc" id="L113">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentIds(new HashSet&lt;&gt;(Collections.singletonList(deploymentId3))).list()).hasSize(1);</span>
<span class="nc" id="L114">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentIds(new HashSet&lt;&gt;(Collections.singletonList(deploymentId3))).count())</span>
<span class="nc" id="L115">                .isEqualTo(1);</span>
<span class="nc" id="L116">    }</span>

    @Test
    public void testQueryByParentDeploymentId() {
<span class="nc" id="L120">        CmmnDeployment deployment1 = cmmnRepositoryService.createDeployment()</span>
<span class="nc" id="L121">                .parentDeploymentId(&quot;parent1&quot;)</span>
<span class="nc" id="L122">                .addClasspathResource(&quot;org/flowable/cmmn/test/repository/simple-case.cmmn&quot;)</span>
<span class="nc" id="L123">                .deploy();</span>

<span class="nc" id="L125">        CmmnDeployment deployment2 = cmmnRepositoryService.createDeployment()</span>
<span class="nc" id="L126">                .parentDeploymentId(&quot;parent2&quot;)</span>
<span class="nc" id="L127">                .addClasspathResource(&quot;org/flowable/cmmn/test/repository/simple-case.cmmn&quot;)</span>
<span class="nc" id="L128">                .addClasspathResource(&quot;org/flowable/cmmn/test/repository/simple-case2.cmmn&quot;)</span>
<span class="nc" id="L129">                .deploy();</span>

<span class="nc" id="L131">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().parentDeploymentId(&quot;parent1&quot;).list())</span>
<span class="nc" id="L132">                .extracting(CaseDefinition::getKey, CaseDefinition::getDeploymentId)</span>
<span class="nc" id="L133">                .containsExactlyInAnyOrder(</span>
<span class="nc" id="L134">                        tuple(&quot;myCase&quot;, deployment1.getId())</span>
                );
<span class="nc" id="L136">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().parentDeploymentId(&quot;parent1&quot;).count()).isEqualTo(1);</span>

<span class="nc" id="L138">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().parentDeploymentId(&quot;parent2&quot;).list())</span>
<span class="nc" id="L139">                .extracting(CaseDefinition::getKey, CaseDefinition::getDeploymentId)</span>
<span class="nc" id="L140">                .containsExactlyInAnyOrder(</span>
<span class="nc" id="L141">                        tuple(&quot;myCase&quot;, deployment2.getId()),</span>
<span class="nc" id="L142">                        tuple(&quot;myCase2&quot;, deployment2.getId())</span>
                );
<span class="nc" id="L144">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().parentDeploymentId(&quot;parent2&quot;).count()).isEqualTo(2);</span>

<span class="nc" id="L146">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().parentDeploymentId(&quot;unknown&quot;).list()).isEmpty();</span>
<span class="nc" id="L147">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().parentDeploymentId(&quot;unknown&quot;).count()).isEqualTo(0);</span>
<span class="nc" id="L148">    }</span>

    @Test
    public void testQueryByInvalidDeploymentIds() {
<span class="nc" id="L152">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentIds(new HashSet&lt;&gt;(Collections.singletonList(&quot;invalid&quot;))).list()).isEmpty();</span>
<span class="nc" id="L153">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().deploymentIds(new HashSet&lt;&gt;(Collections.singletonList(&quot;invalid&quot;))).count()).isZero();</span>
<span class="nc" id="L154">    }</span>

    @Test
    public void testQueryByEmptyDeploymentIds() {
<span class="nc" id="L158">        assertThatThrownBy(() -&gt; cmmnRepositoryService.createCaseDefinitionQuery().deploymentIds(new HashSet&lt;&gt;()).list())</span>
<span class="nc" id="L159">                .isInstanceOf(FlowableIllegalArgumentException.class);</span>
<span class="nc" id="L160">    }</span>

    @Test
    public void testQueryByCaseDefinitionId() {
<span class="nc" id="L164">        List&lt;String&gt; caseDefinitionIdsDeployment1 = getCaseDefinitionIds(deploymentId1);</span>
<span class="nc" id="L165">        List&lt;String&gt; caseDefinitionIdsDeployment2 = getCaseDefinitionIds(deploymentId2);</span>
<span class="nc" id="L166">        List&lt;String&gt; caseDefinitionIdsDeployment3 = getCaseDefinitionIds(deploymentId3);</span>

<span class="nc" id="L168">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionId(caseDefinitionIdsDeployment1.get(0)).singleResult()).isNotNull();</span>
<span class="nc" id="L169">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionId(caseDefinitionIdsDeployment1.get(0)).list()).hasSize(1);</span>
<span class="nc" id="L170">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionId(caseDefinitionIdsDeployment1.get(0)).count()).isEqualTo(1);</span>

<span class="nc" id="L172">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionId(caseDefinitionIdsDeployment1.get(1)).singleResult()).isNotNull();</span>
<span class="nc" id="L173">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionId(caseDefinitionIdsDeployment1.get(1)).list()).hasSize(1);</span>
<span class="nc" id="L174">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionId(caseDefinitionIdsDeployment1.get(1)).count()).isEqualTo(1);</span>

<span class="nc" id="L176">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionId(caseDefinitionIdsDeployment2.get(0)).singleResult()).isNotNull();</span>
<span class="nc" id="L177">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionId(caseDefinitionIdsDeployment2.get(0)).list()).hasSize(1);</span>
<span class="nc" id="L178">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionId(caseDefinitionIdsDeployment2.get(0)).count()).isEqualTo(1);</span>

<span class="nc" id="L180">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionId(caseDefinitionIdsDeployment3.get(0)).singleResult()).isNotNull();</span>
<span class="nc" id="L181">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionId(caseDefinitionIdsDeployment3.get(0)).list()).hasSize(1);</span>
<span class="nc" id="L182">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionId(caseDefinitionIdsDeployment3.get(0)).count()).isEqualTo(1);</span>
<span class="nc" id="L183">    }</span>

    @Test
    public void testQueryByInvalidCaseDefinitionId() {
<span class="nc" id="L187">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionId(&quot;invalid&quot;).list()).isEmpty();</span>
<span class="nc" id="L188">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionId(&quot;invalid&quot;).count()).isZero();</span>
<span class="nc" id="L189">    }</span>

    @Test
    public void testQueryByCaseDefinitionIds() {
<span class="nc" id="L193">        List&lt;String&gt; caseDefinitionIdsDeployment1 = getCaseDefinitionIds(deploymentId1);</span>
<span class="nc" id="L194">        List&lt;String&gt; caseDefinitionIdsDeployment2 = getCaseDefinitionIds(deploymentId2);</span>

<span class="nc" id="L196">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionIds(new HashSet&lt;&gt;(caseDefinitionIdsDeployment1)).list()).hasSize(2);</span>
<span class="nc" id="L197">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionIds(new HashSet&lt;&gt;(caseDefinitionIdsDeployment1)).count()).isEqualTo(2);</span>

<span class="nc" id="L199">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionIds(new HashSet&lt;&gt;(caseDefinitionIdsDeployment2)).list()).hasSize(1);</span>
<span class="nc" id="L200">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionIds(new HashSet&lt;&gt;(caseDefinitionIdsDeployment2)).count()).isEqualTo(1);</span>
<span class="nc" id="L201">    }</span>

    @Test
    public void testQueryByEmptyCaseDefinitionIds() {
<span class="nc" id="L205">        assertThatThrownBy(() -&gt; cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionIds(new HashSet&lt;&gt;()).list())</span>
<span class="nc" id="L206">                .isInstanceOf(FlowableIllegalArgumentException.class);</span>
<span class="nc" id="L207">    }</span>

    @Test
    public void testQueryByInvalidCaseDefinitionIds() {
<span class="nc" id="L211">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionIds(new HashSet&lt;&gt;(Arrays.asList(&quot;invalid1&quot;, &quot;invalid2&quot;))).list()).isEmpty();</span>
<span class="nc" id="L212">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionIds(new HashSet&lt;&gt;(Arrays.asList(&quot;invalid1&quot;, &quot;invalid2&quot;))).count()).isZero();</span>
<span class="nc" id="L213">    }</span>

    @Test
    public void testQueryByCaseDefinitionCategory() {
<span class="nc" id="L217">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionCategory(&quot;http://flowable.org/cmmn&quot;).list()).hasSize(4);</span>
<span class="nc" id="L218">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionCategory(&quot;http://flowable.org/cmmn&quot;).count()).isEqualTo(4);</span>
<span class="nc" id="L219">    }</span>

    @Test
    public void testQueryByInvalidCaseDefinitionCategory() {
<span class="nc" id="L223">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionCategory(&quot;invalid&quot;).list()).isEmpty();</span>
<span class="nc" id="L224">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionCategory(&quot;invalid&quot;).count()).isZero();</span>
<span class="nc" id="L225">    }</span>

    @Test
    public void testQueryByCaseDefinitionCategoryLike() {
<span class="nc" id="L229">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionCategoryLike(&quot;http%&quot;).list()).hasSize(4);</span>
<span class="nc" id="L230">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionCategoryLike(&quot;http%n&quot;).count()).isEqualTo(4);</span>
<span class="nc" id="L231">    }</span>

    @Test
    public void testQueryByInvalidCaseDefinitionCategoryLike() {
<span class="nc" id="L235">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionCategoryLike(&quot;invalid%&quot;).list()).isEmpty();</span>
<span class="nc" id="L236">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionCategoryLike(&quot;invalid%n&quot;).count()).isZero();</span>
<span class="nc" id="L237">    }</span>

    @Test
    public void testQueryByCaseDefinitionCategoryNotEquals() {
<span class="nc" id="L241">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionCategoryNotEquals(&quot;another&quot;).list()).hasSize(4);</span>
<span class="nc" id="L242">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionCategoryNotEquals(&quot;another&quot;).count()).isEqualTo(4);</span>

<span class="nc" id="L244">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionCategoryNotEquals(&quot;http://flowable.org/cmmn&quot;).list()).isEmpty();</span>
<span class="nc" id="L245">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionCategoryNotEquals(&quot;http://flowable.org/cmmn&quot;).count()).isZero();</span>
<span class="nc" id="L246">    }</span>

    @Test
    public void testQueryByCaseDefinitionName() {
<span class="nc" id="L250">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionName(&quot;Case 1&quot;).list()).hasSize(3);</span>
<span class="nc" id="L251">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionName(&quot;Case 1&quot;).count()).isEqualTo(3);</span>

<span class="nc" id="L253">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionName(&quot;Case 2&quot;).list()).hasSize(1);</span>
<span class="nc" id="L254">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionName(&quot;Case 2&quot;).count()).isEqualTo(1);</span>

<span class="nc" id="L256">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionName(&quot;Case 2&quot;).singleResult().getDeploymentId()).isEqualTo(deploymentId1);</span>
<span class="nc" id="L257">    }</span>

    @Test
    public void testQueryByInvalidCaseDefinitionName() {
<span class="nc" id="L261">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionName(&quot;Case 3&quot;).list()).isEmpty();</span>
<span class="nc" id="L262">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionName(&quot;Case 3&quot;).count()).isZero();</span>
<span class="nc" id="L263">    }</span>

    @Test
    public void testQueryByCaseDefinitionNameLike() {
<span class="nc" id="L267">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionNameLike(&quot;Ca%&quot;).list()).hasSize(4);</span>
<span class="nc" id="L268">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionNameLike(&quot;Ca%&quot;).count()).isEqualTo(4);</span>

<span class="nc" id="L270">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionNameLike(&quot;%2&quot;).list()).hasSize(1);</span>
<span class="nc" id="L271">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionNameLike(&quot;%2&quot;).count()).isEqualTo(1);</span>

<span class="nc" id="L273">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionNameLike(&quot;invalid%&quot;).list()).isEmpty();</span>
<span class="nc" id="L274">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionNameLike(&quot;invalid%&quot;).count()).isZero();</span>
<span class="nc" id="L275">    }</span>

    @Test
    public void testQueryByCaseDefinitionNameLikeIgnoreCase() {
<span class="nc" id="L279">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionNameLikeIgnoreCase(&quot;ca%&quot;).list()).hasSize(4);</span>
<span class="nc" id="L280">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionNameLikeIgnoreCase(&quot;ca%&quot;).count()).isEqualTo(4);</span>

<span class="nc" id="L282">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionNameLikeIgnoreCase(&quot;%A%2&quot;).list()).hasSize(1);</span>
<span class="nc" id="L283">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionNameLikeIgnoreCase(&quot;%A%2&quot;).count()).isEqualTo(1);</span>

<span class="nc" id="L285">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionNameLikeIgnoreCase(&quot;invalid%&quot;).list()).isEmpty();</span>
<span class="nc" id="L286">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionNameLikeIgnoreCase(&quot;invalid%&quot;).count()).isZero();</span>

<span class="nc" id="L288">        assertThatThrownBy(() -&gt; cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionNameLikeIgnoreCase(null))</span>
<span class="nc" id="L289">                .isInstanceOf(FlowableIllegalArgumentException.class)</span>
<span class="nc" id="L290">                .hasMessage(&quot;nameLikeIgnoreCase is null&quot;);</span>
<span class="nc" id="L291">    }</span>

    @Test
    public void testQueryByCaseDefinitionKey() {
<span class="nc" id="L295">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKey(&quot;myCase&quot;).list()).hasSize(3);</span>
<span class="nc" id="L296">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKey(&quot;myCase&quot;).count()).isEqualTo(3);</span>

<span class="nc" id="L298">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKey(&quot;myCase2&quot;).list()).hasSize(1);</span>
<span class="nc" id="L299">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKey(&quot;myCase2&quot;).count()).isEqualTo(1);</span>
<span class="nc" id="L300">    }</span>

    @Test
    public void testQueryByInvalidCaseDefinitionKey() {
<span class="nc" id="L304">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKey(&quot;invalid&quot;).list()).isEmpty();</span>
<span class="nc" id="L305">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKey(&quot;invalid&quot;).count()).isZero();</span>
<span class="nc" id="L306">    }</span>

    @Test
    public void testQueryByCaseDefinitionKeyLike() {
<span class="nc" id="L310">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKeyLike(&quot;my%&quot;).list()).hasSize(4);</span>
<span class="nc" id="L311">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKeyLike(&quot;my%&quot;).count()).isEqualTo(4);</span>

<span class="nc" id="L313">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKeyLike(&quot;%2&quot;).list()).hasSize(1);</span>
<span class="nc" id="L314">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKeyLike(&quot;%2&quot;).count()).isEqualTo(1);</span>
<span class="nc" id="L315">    }</span>

    @Test
    public void testQueryByInvalidCaseDefinitionKeyLike() {
<span class="nc" id="L319">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKeyLike(&quot;%invalid&quot;).list()).isEmpty();</span>
<span class="nc" id="L320">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKeyLike(&quot;%invalid&quot;).count()).isZero();</span>
<span class="nc" id="L321">    }</span>

    @Test
    public void testQueryByCaseDefinitionVersion() {
<span class="nc" id="L325">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersion(1).list()).hasSize(2);</span>
<span class="nc" id="L326">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersion(1).count()).isEqualTo(2);</span>

<span class="nc" id="L328">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersion(2).list()).hasSize(1);</span>
<span class="nc" id="L329">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersion(2).count()).isEqualTo(1);</span>

<span class="nc" id="L331">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersion(2).list()).hasSize(1);</span>
<span class="nc" id="L332">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersion(2).count()).isEqualTo(1);</span>

<span class="nc" id="L334">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersion(4).list()).isEmpty();</span>
<span class="nc" id="L335">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersion(4).count()).isZero();</span>
<span class="nc" id="L336">    }</span>

    @Test
    public void testQueryByCaseDefinitionVersionGreaterThan() {
<span class="nc" id="L340">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionGreaterThan(2).list()).hasSize(1);</span>
<span class="nc" id="L341">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionGreaterThan(2).count()).isEqualTo(1);</span>

<span class="nc" id="L343">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionGreaterThan(3).list()).isEmpty();</span>
<span class="nc" id="L344">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionGreaterThan(3).count()).isZero();</span>
<span class="nc" id="L345">    }</span>

    @Test
    public void testQueryByCaseDefinitionVersionGreaterThanOrEquals() {
<span class="nc" id="L349">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionGreaterThanOrEquals(2).list()).hasSize(2);</span>
<span class="nc" id="L350">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionGreaterThanOrEquals(2).count()).isEqualTo(2);</span>

<span class="nc" id="L352">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionGreaterThanOrEquals(3).list()).hasSize(1);</span>
<span class="nc" id="L353">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionGreaterThanOrEquals(3).count()).isEqualTo(1);</span>

<span class="nc" id="L355">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionGreaterThanOrEquals(4).list()).isEmpty();</span>
<span class="nc" id="L356">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionGreaterThanOrEquals(4).count()).isZero();</span>
<span class="nc" id="L357">    }</span>

    @Test
    public void testQueryByCaseDefinitionVersionLowerThan() {
<span class="nc" id="L361">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionLowerThan(2).list()).hasSize(2);</span>
<span class="nc" id="L362">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionLowerThan(2).count()).isEqualTo(2);</span>

<span class="nc" id="L364">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionLowerThan(3).list()).hasSize(3);</span>
<span class="nc" id="L365">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionLowerThan(3).count()).isEqualTo(3);</span>
<span class="nc" id="L366">    }</span>

    @Test
    public void testQueryByCaseDefinitionVersionLowerThanOrEquals() {
<span class="nc" id="L370">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionLowerThanOrEquals(2).list()).hasSize(3);</span>
<span class="nc" id="L371">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionLowerThanOrEquals(2).count()).isEqualTo(3);</span>

<span class="nc" id="L373">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionLowerThanOrEquals(3).list()).hasSize(4);</span>
<span class="nc" id="L374">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionLowerThanOrEquals(3).count()).isEqualTo(4);</span>

<span class="nc" id="L376">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionLowerThanOrEquals(4).list()).hasSize(4);</span>
<span class="nc" id="L377">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionVersionLowerThanOrEquals(4).count()).isEqualTo(4);</span>
<span class="nc" id="L378">    }</span>

    @Test
    public void testQueryByLatestVersion() {
<span class="nc" id="L382">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().latestVersion().list()).hasSize(2);</span>
<span class="nc" id="L383">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().latestVersion().count()).isEqualTo(2);</span>
<span class="nc" id="L384">    }</span>

    @Test
    public void testQueryByLatestVersionAndKey() {
<span class="nc" id="L388">        CaseDefinition caseDefinition = cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKey(&quot;myCase&quot;).latestVersion().singleResult();</span>
<span class="nc" id="L389">        assertThat(caseDefinition).isNotNull();</span>
<span class="nc" id="L390">        assertThat(caseDefinition.getVersion()).isEqualTo(3);</span>
<span class="nc" id="L391">        assertThat(caseDefinition.getDeploymentId()).isEqualTo(deploymentId3);</span>
<span class="nc" id="L392">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKey(&quot;myCase&quot;).latestVersion().list()).hasSize(1);</span>
<span class="nc" id="L393">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKey(&quot;myCase&quot;).latestVersion().count()).isEqualTo(1);</span>
<span class="nc" id="L394">    }</span>

    @Test
    public void testQueryByCaseDefinitionResourceName() {
<span class="nc" id="L398">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionResourceName(&quot;org/flowable/cmmn/test/repository/simple-case.cmmn&quot;).list()</span>
<span class="nc" id="L399">        ).hasSize(3);</span>
<span class="nc" id="L400">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionResourceName(&quot;org/flowable/cmmn/test/repository/simple-case.cmmn&quot;).count())</span>
<span class="nc" id="L401">                .isEqualTo(3);</span>

<span class="nc" id="L403">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionResourceName(&quot;org/flowable/cmmn/test/repository/simple-case2.cmmn&quot;).list()</span>
<span class="nc" id="L404">        ).hasSize(1);</span>
<span class="nc" id="L405">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionResourceName(&quot;org/flowable/cmmn/test/repository/simple-case2.cmmn&quot;).count())</span>
<span class="nc" id="L406">                .isEqualTo(1);</span>

<span class="nc" id="L408">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionResourceName(&quot;org/flowable/cmmn/test/repository/simple-case.cmmn&quot;)</span>
<span class="nc" id="L409">                .latestVersion().list()).hasSize(1);</span>
<span class="nc" id="L410">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionResourceName(&quot;org/flowable/cmmn/test/repository/simple-case.cmmn&quot;)</span>
<span class="nc" id="L411">                .latestVersion().count()).isEqualTo(1);</span>
<span class="nc" id="L412">    }</span>

    @Test
    public void testQueryByInvalidCaseDefinitionResourceName() {
<span class="nc" id="L416">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionResourceName(&quot;invalid.cmmn&quot;).list()).isEmpty();</span>
<span class="nc" id="L417">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionResourceName(&quot;invalid.cmmn&quot;).count()).isZero();</span>
<span class="nc" id="L418">    }</span>

    @Test
    public void testQueryByCaseDefinitionResourceNameLike() {
<span class="nc" id="L422">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionResourceNameLike(&quot;%.cmmn&quot;).list()).hasSize(4);</span>
<span class="nc" id="L423">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionResourceNameLike(&quot;%.cmmn&quot;).count()).isEqualTo(4);</span>

<span class="nc" id="L425">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionResourceNameLike(&quot;%2%&quot;).list()).hasSize(1);</span>
<span class="nc" id="L426">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionResourceNameLike(&quot;%2%&quot;).count()).isEqualTo(1);</span>
<span class="nc" id="L427">    }</span>

    @Test
    public void testQueryByInvalidCaseDefinitionResourceNameLike() {
<span class="nc" id="L431">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionResourceNameLike(&quot;%invalid%&quot;).list()).isEmpty();</span>
<span class="nc" id="L432">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionResourceNameLike(&quot;%invalid%&quot;).count()).isZero();</span>
<span class="nc" id="L433">    }</span>

    @Test
    public void testQueryOrderByCaseDefinitionCategory() {
<span class="nc" id="L437">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionCategory().asc().list()).hasSize(4);</span>
<span class="nc" id="L438">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionCategory().asc().count()).isEqualTo(4);</span>
<span class="nc" id="L439">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionCategory().desc().list()).hasSize(4);</span>
<span class="nc" id="L440">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionCategory().desc().count()).isEqualTo(4);</span>
<span class="nc" id="L441">    }</span>

    @Test
    public void testQueryOrderByCaseDefinitionKey() {
<span class="nc" id="L445">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionKey().asc().list()).hasSize(4);</span>
<span class="nc" id="L446">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionKey().asc().count()).isEqualTo(4);</span>
<span class="nc" id="L447">        List&lt;CaseDefinition&gt; caseDefinitions = cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionKey().asc().list();</span>
<span class="nc bnc" id="L448" title="All 2 branches missed.">        for (int i = 0; i &lt; caseDefinitions.size(); i++) {</span>
<span class="nc bnc" id="L449" title="All 2 branches missed.">            if (i &lt;= 2) {</span>
<span class="nc" id="L450">                assertThat(caseDefinitions.get(i).getKey()).isEqualTo(&quot;myCase&quot;);</span>
            } else {
<span class="nc" id="L452">                assertThat(caseDefinitions.get(i).getKey()).isEqualTo(&quot;myCase2&quot;);</span>
            }
        }

<span class="nc" id="L456">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionKey().desc().list()).hasSize(4);</span>
<span class="nc" id="L457">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionKey().desc().count()).isEqualTo(4);</span>
<span class="nc" id="L458">        caseDefinitions = cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionKey().desc().list();</span>
<span class="nc bnc" id="L459" title="All 2 branches missed.">        for (int i = 0; i &lt; caseDefinitions.size(); i++) {</span>
<span class="nc bnc" id="L460" title="All 2 branches missed.">            if (i &gt; 0) {</span>
<span class="nc" id="L461">                assertThat(caseDefinitions.get(i).getKey()).isEqualTo(&quot;myCase&quot;);</span>
            } else {
<span class="nc" id="L463">                assertThat(caseDefinitions.get(i).getKey()).isEqualTo(&quot;myCase2&quot;);</span>
            }
        }
<span class="nc" id="L466">    }</span>

    @Test
    public void testQueryOrderByCaseDefinitionId() {
<span class="nc" id="L470">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionId().asc().list()).hasSize(4);</span>
<span class="nc" id="L471">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionId().asc().count()).isEqualTo(4);</span>
<span class="nc" id="L472">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionId().desc().list()).hasSize(4);</span>
<span class="nc" id="L473">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionId().desc().count()).isEqualTo(4);</span>
<span class="nc" id="L474">    }</span>

    @Test
    public void testQueryOrderByCaseDefinitionName() {
<span class="nc" id="L478">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionName().asc().list()).hasSize(4);</span>
<span class="nc" id="L479">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionName().asc().count()).isEqualTo(4);</span>
<span class="nc" id="L480">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionName().desc().list()).hasSize(4);</span>
<span class="nc" id="L481">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionName().desc().count()).isEqualTo(4);</span>
<span class="nc" id="L482">    }</span>

    @Test
    public void testQueryOrderByCaseDefinitionDeploymentId() {
<span class="nc" id="L486">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByDeploymentId().asc().list()).hasSize(4);</span>
<span class="nc" id="L487">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByDeploymentId().asc().count()).isEqualTo(4);</span>
<span class="nc" id="L488">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByDeploymentId().desc().list()).hasSize(4);</span>
<span class="nc" id="L489">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByDeploymentId().desc().count()).isEqualTo(4);</span>
<span class="nc" id="L490">    }</span>

    @Test
    public void testQueryOrderByCaseDefinitionVersion() {
<span class="nc" id="L494">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionVersion().asc().list()).hasSize(4);</span>
<span class="nc" id="L495">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionVersion().asc().count()).isEqualTo(4);</span>
<span class="nc" id="L496">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionVersion().desc().list()).hasSize(4);</span>
<span class="nc" id="L497">        assertThat(cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionVersion().desc().count()).isEqualTo(4);</span>

<span class="nc" id="L499">        List&lt;CaseDefinition&gt; caseDefinitions = cmmnRepositoryService.createCaseDefinitionQuery().orderByCaseDefinitionVersion().desc().list();</span>
<span class="nc" id="L500">        assertThat(caseDefinitions.get(0).getVersion()).isEqualTo(3);</span>
<span class="nc" id="L501">        assertThat(caseDefinitions.get(1).getVersion()).isEqualTo(2);</span>
<span class="nc" id="L502">        assertThat(caseDefinitions.get(2).getVersion()).isEqualTo(1);</span>
<span class="nc" id="L503">        assertThat(caseDefinitions.get(3).getVersion()).isEqualTo(1);</span>

<span class="nc" id="L505">        caseDefinitions = cmmnRepositoryService.createCaseDefinitionQuery().latestVersion().orderByCaseDefinitionVersion().asc().list();</span>
<span class="nc" id="L506">        assertThat(caseDefinitions)</span>
<span class="nc" id="L507">                .extracting(CaseDefinition::getVersion, CaseDefinition::getKey)</span>
<span class="nc" id="L508">                .containsExactly(</span>
<span class="nc" id="L509">                        tuple(1, &quot;myCase2&quot;),</span>
<span class="nc" id="L510">                        tuple(3, &quot;myCase&quot;));</span>
<span class="nc" id="L511">        assertThat(caseDefinitions.get(0).getVersion()).isEqualTo(1);</span>
<span class="nc" id="L512">        assertThat(caseDefinitions.get(0).getKey()).isEqualTo(&quot;myCase2&quot;);</span>
<span class="nc" id="L513">        assertThat(caseDefinitions.get(1).getVersion()).isEqualTo(3);</span>
<span class="nc" id="L514">        assertThat(caseDefinitions.get(1).getKey()).isEqualTo(&quot;myCase&quot;);</span>
<span class="nc" id="L515">    }</span>

    @Test
    public void testLocalization() {
<span class="nc" id="L519">        cmmnEngineConfiguration.setCaseDefinitionLocalizationManager(new CaseDefinitionLocalizationManager() {</span>
            @Override
            public void localize(CaseDefinition caseDefinition, String locale, boolean withLocalizationFallback) {
<span class="nc bnc" id="L522" title="All 2 branches missed.">                if (&quot;pt&quot;.equals(locale)) {</span>
<span class="nc" id="L523">                    caseDefinition.setLocalizedName(&quot;Caso 1&quot;);</span>
<span class="nc" id="L524">                    caseDefinition.setLocalizedDescription(&quot;Isto é o exemplo de uma descrição&quot;);</span>
                }
<span class="nc" id="L526">            }</span>
        });

<span class="nc" id="L529">        CaseDefinition caseDefinition = cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKey(&quot;myCase&quot;).latestVersion().singleResult();</span>
<span class="nc" id="L530">        assertThat(caseDefinition.getName()).isEqualTo(&quot;Case 1&quot;);</span>
<span class="nc" id="L531">        assertThat(caseDefinition.getDescription()).isEqualTo(&quot;This is a sample description&quot;);</span>

<span class="nc" id="L533">        caseDefinition = cmmnRepositoryService.createCaseDefinitionQuery().caseDefinitionKey(&quot;myCase&quot;).latestVersion().locale(&quot;pt&quot;).singleResult();</span>
<span class="nc" id="L534">        assertThat(caseDefinition.getName()).isEqualTo(&quot;Caso 1&quot;);</span>
<span class="nc" id="L535">        assertThat(caseDefinition.getDescription()).isEqualTo(&quot;Isto é o exemplo de uma descrição&quot;);</span>
<span class="nc" id="L536">    }</span>

    private List&lt;String&gt; getCaseDefinitionIds(String deploymentId) {
<span class="nc" id="L539">        List&lt;CaseDefinition&gt; caseDefinitions = cmmnRepositoryService.createCaseDefinitionQuery().deploymentId(deploymentId).list();</span>
<span class="nc" id="L540">        List&lt;String&gt; ids = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L541" title="All 2 branches missed.">        for (CaseDefinition caseDefinition : caseDefinitions) {</span>
<span class="nc" id="L542">            ids.add(caseDefinition.getId());</span>
<span class="nc" id="L543">        }</span>
<span class="nc" id="L544">        return ids;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>