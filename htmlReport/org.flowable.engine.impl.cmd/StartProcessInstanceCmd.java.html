<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>StartProcessInstanceCmd.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">jacoco.exec</a> &gt; <a href="index.source.html" class="el_package">org.flowable.engine.impl.cmd</a> &gt; <span class="el_source">StartProcessInstanceCmd.java</span></div><h1>StartProcessInstanceCmd.java</h1><pre class="source lang-java linenums">/* Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
/* Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *      http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.flowable.engine.impl.cmd;

import java.io.Serializable;
import java.util.Collection;
import java.util.HashMap;
import java.util.Map;

import org.apache.commons.lang3.StringUtils;
import org.flowable.bpmn.model.BpmnModel;
import org.flowable.bpmn.model.FlowElement;
import org.flowable.bpmn.model.Process;
import org.flowable.bpmn.model.StartEvent;
import org.flowable.bpmn.model.ValuedDataObject;
import org.flowable.common.engine.api.FlowableIllegalArgumentException;
import org.flowable.common.engine.api.FlowableObjectNotFoundException;
import org.flowable.common.engine.api.scope.ScopeTypes;
import org.flowable.common.engine.impl.interceptor.Command;
import org.flowable.common.engine.impl.interceptor.CommandContext;
import org.flowable.engine.ProcessEngineConfiguration;
import org.flowable.engine.impl.cfg.ProcessEngineConfigurationImpl;
import org.flowable.engine.impl.persistence.deploy.DeploymentManager;
import org.flowable.engine.impl.persistence.entity.ProcessDefinitionEntityManager;
import org.flowable.engine.impl.runtime.ProcessInstanceBuilderImpl;
import org.flowable.engine.impl.util.CommandContextUtil;
import org.flowable.engine.impl.util.ProcessDefinitionUtil;
import org.flowable.engine.impl.util.ProcessInstanceHelper;
import org.flowable.engine.impl.util.TaskHelper;
import org.flowable.engine.repository.ProcessDefinition;
import org.flowable.engine.runtime.ProcessInstance;
import org.flowable.form.api.FormFieldHandler;
import org.flowable.form.api.FormInfo;
import org.flowable.form.api.FormRepositoryService;
import org.flowable.form.api.FormService;
import org.flowable.variable.service.impl.el.NoExecutionVariableScope;

/**
 * @author Tom Baeyens
 * @author Joram Barrez
 */
public class StartProcessInstanceCmd&lt;T&gt; implements Command&lt;ProcessInstance&gt;, Serializable {

    private static final long serialVersionUID = 1L;
    protected String processDefinitionKey;
    protected String processDefinitionId;
    protected String processDefinitionParentDeploymentId;
    protected Map&lt;String, Object&gt; variables;
    protected Map&lt;String, Object&gt; transientVariables;
    protected String businessKey;
    protected String businessStatus;
    protected String tenantId;
    protected String overrideDefinitionTenantId;
    protected String predefinedProcessInstanceId;
    protected String processInstanceName;
    protected String startEventId;
    protected String callbackId;
    protected String callbackType;
    protected String referenceId;
    protected String referenceType;
    protected String ownerId;
    protected String assigneeId;
    protected String stageInstanceId;
    protected Map&lt;String, Object&gt; startFormVariables;
    protected String outcome;
    protected Map&lt;String, Object&gt; extraFormVariables;
    protected FormInfo extraFormInfo;
    protected String extraFormOutcome;
    protected boolean fallbackToDefaultTenant;
    protected ProcessInstanceHelper processInstanceHelper;

<span class="nc" id="L83">    public StartProcessInstanceCmd(String processDefinitionKey, String processDefinitionId, String businessKey, Map&lt;String, Object&gt; variables) {</span>
<span class="nc" id="L84">        this.processDefinitionKey = processDefinitionKey;</span>
<span class="nc" id="L85">        this.processDefinitionId = processDefinitionId;</span>
<span class="nc" id="L86">        this.businessKey = businessKey;</span>
<span class="nc" id="L87">        this.variables = variables;</span>
<span class="nc" id="L88">    }</span>

    public StartProcessInstanceCmd(String processDefinitionKey, String processDefinitionId, String businessKey, Map&lt;String, Object&gt; variables, String tenantId) {
<span class="nc" id="L91">        this(processDefinitionKey, processDefinitionId, businessKey, variables);</span>
<span class="nc" id="L92">        this.tenantId = tenantId;</span>
<span class="nc" id="L93">    }</span>

    public StartProcessInstanceCmd(ProcessInstanceBuilderImpl processInstanceBuilder) {
<span class="nc" id="L96">        this(processInstanceBuilder.getProcessDefinitionKey(),</span>
<span class="nc" id="L97">                processInstanceBuilder.getProcessDefinitionId(),</span>
<span class="nc" id="L98">                processInstanceBuilder.getBusinessKey(),</span>
<span class="nc" id="L99">                processInstanceBuilder.getVariables(),</span>
<span class="nc" id="L100">                processInstanceBuilder.getTenantId());</span>
        
<span class="nc" id="L102">        this.processDefinitionParentDeploymentId = processInstanceBuilder.getProcessDefinitionParentDeploymentId();</span>
<span class="nc" id="L103">        this.processInstanceName = processInstanceBuilder.getProcessInstanceName();</span>
<span class="nc" id="L104">        this.startEventId = processInstanceBuilder.getStartEventId();</span>
<span class="nc" id="L105">        this.overrideDefinitionTenantId = processInstanceBuilder.getOverrideDefinitionTenantId();</span>
<span class="nc" id="L106">        this.predefinedProcessInstanceId = processInstanceBuilder.getPredefinedProcessInstanceId();</span>
<span class="nc" id="L107">        this.transientVariables = processInstanceBuilder.getTransientVariables();</span>
<span class="nc" id="L108">        this.callbackId = processInstanceBuilder.getCallbackId();</span>
<span class="nc" id="L109">        this.callbackType = processInstanceBuilder.getCallbackType();</span>
<span class="nc" id="L110">        this.referenceId = processInstanceBuilder.getReferenceId();</span>
<span class="nc" id="L111">        this.referenceType = processInstanceBuilder.getReferenceType();</span>
<span class="nc" id="L112">        this.ownerId = processInstanceBuilder.getOwnerId();</span>
<span class="nc" id="L113">        this.assigneeId = processInstanceBuilder.getAssigneeId();</span>
<span class="nc" id="L114">        this.stageInstanceId = processInstanceBuilder.getStageInstanceId();</span>
<span class="nc" id="L115">        this.startFormVariables = processInstanceBuilder.getStartFormVariables();</span>
<span class="nc" id="L116">        this.outcome = processInstanceBuilder.getOutcome();</span>
<span class="nc" id="L117">        this.extraFormVariables = processInstanceBuilder.getExtraFormVariables();</span>
<span class="nc" id="L118">        this.extraFormInfo = processInstanceBuilder.getExtraFormInfo();</span>
<span class="nc" id="L119">        this.extraFormOutcome = processInstanceBuilder.getExtraFormOutcome();</span>
<span class="nc" id="L120">        this.fallbackToDefaultTenant = processInstanceBuilder.isFallbackToDefaultTenant();</span>
<span class="nc" id="L121">        this.businessStatus = processInstanceBuilder.getBusinessStatus();</span>
<span class="nc" id="L122">    }</span>

    @Override
    public ProcessInstance execute(CommandContext commandContext) {
<span class="nc" id="L126">        ProcessEngineConfigurationImpl processEngineConfiguration = CommandContextUtil.getProcessEngineConfiguration(commandContext);</span>
<span class="nc" id="L127">        processInstanceHelper = processEngineConfiguration.getProcessInstanceHelper();</span>
<span class="nc" id="L128">        ProcessDefinition processDefinition = getProcessDefinition(processEngineConfiguration, commandContext);</span>

<span class="nc" id="L130">        ProcessInstance processInstance = null;</span>
<span class="nc bnc" id="L131" title="All 2 branches missed.">        if (hasFormData()) {</span>
<span class="nc" id="L132">            processInstance = handleProcessInstanceWithForm(commandContext, processDefinition, processEngineConfiguration);</span>
        } else {
<span class="nc" id="L134">            processInstance = startProcessInstance(processDefinition);</span>
        }

<span class="nc" id="L137">        return processInstance;</span>
    }

    protected ProcessInstance handleProcessInstanceWithForm(CommandContext commandContext, ProcessDefinition processDefinition, 
                    ProcessEngineConfigurationImpl processEngineConfiguration) {
        
<span class="nc" id="L143">        FormService formService = CommandContextUtil.getFormService(commandContext);</span>
        
<span class="nc" id="L145">        FlowElement startElement = null;</span>
<span class="nc bnc" id="L146" title="All 4 branches missed.">        if (hasStartFormData() || extraFormInfo != null) {</span>
<span class="nc" id="L147">            BpmnModel bpmnModel = ProcessDefinitionUtil.getBpmnModel(processDefinition.getId());</span>
<span class="nc" id="L148">            Process process = bpmnModel.getProcessById(processDefinition.getKey());</span>
<span class="nc" id="L149">            startElement = process.getInitialFlowElement();</span>
        }

<span class="nc" id="L152">        FormInfo formInfo = null;</span>
<span class="nc" id="L153">        Map&lt;String, Object&gt; processVariables = null;</span>
<span class="nc bnc" id="L154" title="All 2 branches missed.">        if (hasStartFormData()) {</span>
<span class="nc bnc" id="L155" title="All 2 branches missed.">            if (startElement instanceof StartEvent) {</span>
<span class="nc" id="L156">                StartEvent startEvent = (StartEvent) startElement;</span>
<span class="nc" id="L157">                String startFormKey = startEvent.getFormKey();</span>
<span class="nc bnc" id="L158" title="All 2 branches missed.">                if (StringUtils.isNotEmpty(startFormKey)) {</span>
<span class="nc" id="L159">                    FormRepositoryService formRepositoryService = CommandContextUtil.getFormRepositoryService(commandContext);</span>

<span class="nc" id="L161">                    formInfo = resolveFormInfo(startEvent, processDefinition, formRepositoryService, processEngineConfiguration);</span>

<span class="nc bnc" id="L163" title="All 2 branches missed.">                    if (formInfo != null) {</span>
<span class="nc bnc" id="L164" title="All 2 branches missed.">                        if (isFormFieldValidationEnabled(processEngineConfiguration, startEvent)) {</span>
<span class="nc" id="L165">                            formService.validateFormFields(startEvent.getId(), &quot;startEvent&quot;, null, processDefinition.getId(), </span>
                                    ScopeTypes.BPMN, formInfo, startFormVariables);
                        }
                        // The processVariables are the variables that should be used when starting the process
                        // the actual variables should instead be used when saving the form instances
<span class="nc" id="L170">                        processVariables = formService.getVariablesFromFormSubmission(startElement.getId(), &quot;startEvent&quot;, </span>
<span class="nc" id="L171">                                null, processDefinition.getId(), ScopeTypes.BPMN, formInfo, startFormVariables, outcome);</span>
<span class="nc bnc" id="L172" title="All 2 branches missed.">                        if (processVariables != null) {</span>
<span class="nc bnc" id="L173" title="All 2 branches missed.">                            if (variables == null) {</span>
<span class="nc" id="L174">                                variables = new HashMap&lt;&gt;();</span>
                            }
<span class="nc" id="L176">                            variables.putAll(processVariables);</span>
                        }
                    }
                }
            }

        }

<span class="nc" id="L184">        Map&lt;String, Object&gt; extraFormVariables = null;</span>
<span class="nc bnc" id="L185" title="All 2 branches missed.">        if (extraFormInfo != null) {</span>
<span class="nc" id="L186">            String startEventId = null;</span>
<span class="nc bnc" id="L187" title="All 2 branches missed.">            if (startElement instanceof StartEvent) {</span>
<span class="nc" id="L188">                startEventId = startElement.getId();</span>
            }
            
<span class="nc" id="L191">            extraFormVariables = formService.getVariablesFromFormSubmission(startEventId, &quot;startEvent&quot;, null, processDefinition.getId(), </span>
                    ScopeTypes.BPMN, this.extraFormInfo, this.extraFormVariables, this.extraFormOutcome);

<span class="nc bnc" id="L194" title="All 2 branches missed.">            if (extraFormVariables != null) {</span>
<span class="nc bnc" id="L195" title="All 2 branches missed.">                if (variables == null) {</span>
<span class="nc" id="L196">                    variables = new HashMap&lt;&gt;();</span>
                }

<span class="nc" id="L199">                variables.putAll(extraFormVariables);</span>
            }
        }

<span class="nc" id="L203">        ProcessInstance processInstance = startProcessInstance(processDefinition);</span>

<span class="nc bnc" id="L205" title="All 2 branches missed.">        if (processVariables != null) {</span>
            // processVariables can be non null only if the formInfo was not null
<span class="nc" id="L207">            formService.createFormInstance(startFormVariables, formInfo, null, processInstance.getId(),</span>
<span class="nc" id="L208">                            processInstance.getProcessDefinitionId(), processInstance.getTenantId(), outcome);</span>
<span class="nc" id="L209">            FormFieldHandler formFieldHandler = processEngineConfiguration.getFormFieldHandler();</span>
<span class="nc" id="L210">            formFieldHandler.handleFormFieldsOnSubmit(formInfo, null, processInstance.getId(), null, null, processVariables, processInstance.getTenantId());</span>
        }

<span class="nc bnc" id="L213" title="All 2 branches missed.">        if (extraFormVariables != null) {</span>
            // extraFormVariables can be non null only if the extraFormInfo was not null
<span class="nc" id="L215">            FormFieldHandler formFieldHandler = processEngineConfiguration.getFormFieldHandler();</span>
<span class="nc" id="L216">            formFieldHandler.handleFormFieldsOnSubmit(extraFormInfo, null, processInstance.getId(), null, null, extraFormVariables, processInstance.getTenantId());</span>
        }

<span class="nc" id="L219">        return processInstance;</span>
    }

    protected FormInfo resolveFormInfo(StartEvent startEvent, ProcessDefinition processDefinition, FormRepositoryService formRepositoryService,
            ProcessEngineConfigurationImpl processEngineConfiguration) {
<span class="nc" id="L224">        String formKey = startEvent.getFormKey();</span>
        FormInfo formInfo;
<span class="nc bnc" id="L226" title="All 4 branches missed.">        if (tenantId == null || ProcessEngineConfiguration.NO_TENANT_ID.equals(tenantId)) {</span>
<span class="nc bnc" id="L227" title="All 2 branches missed.">            if (startEvent.isSameDeployment()) {</span>
<span class="nc" id="L228">                String parentDeploymentId = ProcessDefinitionUtil.getDefinitionDeploymentId(processDefinition, processEngineConfiguration);</span>
<span class="nc" id="L229">                formInfo = formRepositoryService.getFormModelByKeyAndParentDeploymentId(formKey, parentDeploymentId);</span>
<span class="nc" id="L230">            } else {</span>
<span class="nc" id="L231">                formInfo = formRepositoryService.getFormModelByKey(formKey);</span>
            }
        } else {
<span class="nc bnc" id="L234" title="All 2 branches missed.">            if (startEvent.isSameDeployment()) {</span>
<span class="nc" id="L235">                String parentDeploymentId = ProcessDefinitionUtil.getDefinitionDeploymentId(processDefinition, processEngineConfiguration);</span>
<span class="nc" id="L236">                formInfo = formRepositoryService.getFormModelByKeyAndParentDeploymentId(formKey, parentDeploymentId, tenantId,</span>
<span class="nc" id="L237">                        processEngineConfiguration.isFallbackToDefaultTenant());</span>
<span class="nc" id="L238">            } else {</span>
<span class="nc" id="L239">                formInfo = formRepositoryService.getFormModelByKey(formKey, tenantId, processEngineConfiguration.isFallbackToDefaultTenant());</span>
            }
        }

<span class="nc" id="L243">        return formInfo;</span>
    }
    protected boolean isFormFieldValidationEnabled(ProcessEngineConfigurationImpl processEngineConfiguration, StartEvent startEvent) {
<span class="nc bnc" id="L246" title="All 2 branches missed.">        if (processEngineConfiguration.isFormFieldValidationEnabled()) {</span>
<span class="nc" id="L247">            return TaskHelper.isFormFieldValidationEnabled(NoExecutionVariableScope.getSharedInstance() // process instance does not exist yet</span>
<span class="nc" id="L248">                , processEngineConfiguration, startEvent.getValidateFormFields());</span>
        }
<span class="nc" id="L250">        return false;</span>
    }

    protected ProcessInstance startProcessInstance(ProcessDefinition processDefinition) {
<span class="nc" id="L254">        return processInstanceHelper.createProcessInstance(processDefinition, businessKey, businessStatus, processInstanceName,</span>
            startEventId, overrideDefinitionTenantId, predefinedProcessInstanceId, variables, transientVariables,
            callbackId, callbackType, referenceId, referenceType, ownerId, assigneeId, stageInstanceId, true);
    }

    protected boolean hasStartFormData() {
<span class="nc bnc" id="L260" title="All 4 branches missed.">        return startFormVariables != null || outcome != null;</span>
    }

    protected boolean hasFormData() {
<span class="nc bnc" id="L264" title="All 4 branches missed.">        return hasStartFormData() || extraFormInfo != null;</span>
    }

    protected ProcessDefinition getProcessDefinition(ProcessEngineConfigurationImpl processEngineConfiguration, CommandContext commandContext) {
<span class="nc" id="L268">        DeploymentManager deploymentCache = CommandContextUtil.getProcessEngineConfiguration(commandContext).getDeploymentManager();</span>
<span class="nc" id="L269">        ProcessDefinitionEntityManager processDefinitionEntityManager = processEngineConfiguration.getProcessDefinitionEntityManager();</span>

        // Find the process definition
<span class="nc" id="L272">        ProcessDefinition processDefinition = null;</span>
<span class="nc bnc" id="L273" title="All 2 branches missed.">        if (processDefinitionId != null) {</span>
<span class="nc" id="L274">            processDefinition = deploymentCache.findDeployedProcessDefinitionById(processDefinitionId);</span>
<span class="nc bnc" id="L275" title="All 2 branches missed.">            if (processDefinition == null) {</span>
<span class="nc" id="L276">                throw new FlowableObjectNotFoundException(&quot;No process definition found for id = '&quot; + processDefinitionId + &quot;'&quot;, ProcessDefinition.class);</span>
            }

<span class="nc bnc" id="L279" title="All 6 branches missed.">        } else if (processDefinitionKey != null &amp;&amp; (tenantId == null || ProcessEngineConfiguration.NO_TENANT_ID.equals(tenantId))) {</span>

<span class="nc bnc" id="L281" title="All 2 branches missed.">            if (processDefinitionParentDeploymentId != null) {</span>
<span class="nc" id="L282">                processDefinition = processDefinitionEntityManager</span>
<span class="nc" id="L283">                        .findProcessDefinitionByParentDeploymentAndKey(processDefinitionParentDeploymentId, processDefinitionKey);</span>
            }

<span class="nc bnc" id="L286" title="All 2 branches missed.">            if (processDefinition == null) {</span>
<span class="nc" id="L287">                processDefinition = processDefinitionEntityManager.findLatestProcessDefinitionByKey(processDefinitionKey);</span>
            }

<span class="nc bnc" id="L290" title="All 2 branches missed.">            if (processDefinition == null) {</span>
<span class="nc" id="L291">                throw new FlowableObjectNotFoundException(&quot;No process definition found for key '&quot; + processDefinitionKey + &quot;'&quot;, ProcessDefinition.class);</span>
            }

<span class="nc bnc" id="L294" title="All 6 branches missed.">        } else if (processDefinitionKey != null &amp;&amp; tenantId != null &amp;&amp; !ProcessEngineConfiguration.NO_TENANT_ID.equals(tenantId)) {</span>

<span class="nc bnc" id="L296" title="All 2 branches missed.">            if (processDefinitionParentDeploymentId != null) {</span>
<span class="nc" id="L297">                processDefinition = processDefinitionEntityManager</span>
<span class="nc" id="L298">                        .findProcessDefinitionByParentDeploymentAndKeyAndTenantId(processDefinitionParentDeploymentId, processDefinitionKey, tenantId);</span>
            }

<span class="nc bnc" id="L301" title="All 2 branches missed.">            if (processDefinition == null) {</span>
<span class="nc" id="L302">                processDefinition = processDefinitionEntityManager.findLatestProcessDefinitionByKeyAndTenantId(processDefinitionKey, tenantId);</span>
            }

<span class="nc bnc" id="L305" title="All 2 branches missed.">            if (processDefinition == null) {</span>
<span class="nc bnc" id="L306" title="All 4 branches missed.">                if (fallbackToDefaultTenant || processEngineConfiguration.isFallbackToDefaultTenant()) {</span>
<span class="nc" id="L307">                    String defaultTenant = processEngineConfiguration.getDefaultTenantProvider().getDefaultTenant(tenantId, ScopeTypes.BPMN, processDefinitionKey);</span>
<span class="nc bnc" id="L308" title="All 2 branches missed.">                    if (StringUtils.isNotEmpty(defaultTenant)) {</span>
<span class="nc" id="L309">                        processDefinition = processDefinitionEntityManager.findLatestProcessDefinitionByKeyAndTenantId(processDefinitionKey, defaultTenant);</span>
<span class="nc bnc" id="L310" title="All 2 branches missed.">                        if (processDefinition != null) {</span>
<span class="nc" id="L311">                            overrideDefinitionTenantId = tenantId;</span>
                        }
                        
                    } else {
<span class="nc" id="L315">                        processDefinition = processDefinitionEntityManager.findLatestProcessDefinitionByKey(processDefinitionKey);</span>
                    }
                    
<span class="nc bnc" id="L318" title="All 2 branches missed.">                    if (processDefinition == null) {</span>
<span class="nc" id="L319">                        throw new FlowableObjectNotFoundException(&quot;No process definition found for key '&quot; + processDefinitionKey +</span>
                            &quot;'. Fallback to default tenant was also applied.&quot;, ProcessDefinition.class);
                    }
<span class="nc" id="L322">                } else {</span>
<span class="nc" id="L323">                    throw new FlowableObjectNotFoundException(&quot;Process definition with key '&quot; + processDefinitionKey +</span>
                        &quot;' and tenantId '&quot;+ tenantId +&quot;' was not found&quot;, ProcessDefinition.class);
                }
            }

        } else {
<span class="nc" id="L329">            throw new FlowableIllegalArgumentException(&quot;processDefinitionKey and processDefinitionId are null&quot;);</span>
        }
<span class="nc" id="L331">        return processDefinition;</span>
    }

    protected Map&lt;String, Object&gt; processDataObjects(Collection&lt;ValuedDataObject&gt; dataObjects) {
<span class="nc" id="L335">        Map&lt;String, Object&gt; variablesMap = new HashMap&lt;&gt;();</span>
        // convert data objects to process variables
<span class="nc bnc" id="L337" title="All 2 branches missed.">        if (dataObjects != null) {</span>
<span class="nc bnc" id="L338" title="All 2 branches missed.">            for (ValuedDataObject dataObject : dataObjects) {</span>
<span class="nc" id="L339">                variablesMap.put(dataObject.getName(), dataObject.getValue());</span>
<span class="nc" id="L340">            }</span>
        }
<span class="nc" id="L342">        return variablesMap;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>