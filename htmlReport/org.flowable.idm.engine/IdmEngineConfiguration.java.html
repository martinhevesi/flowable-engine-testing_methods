<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>IdmEngineConfiguration.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">jacoco.exec</a> &gt; <a href="index.source.html" class="el_package">org.flowable.idm.engine</a> &gt; <span class="el_source">IdmEngineConfiguration.java</span></div><h1>IdmEngineConfiguration.java</h1><pre class="source lang-java linenums">/* Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.flowable.idm.engine;

import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.transaction.TransactionFactory;
import org.flowable.common.engine.api.delegate.event.FlowableEventDispatcher;
import org.flowable.common.engine.api.delegate.event.FlowableEventListener;
import org.flowable.common.engine.impl.AbstractEngineConfiguration;
import org.flowable.common.engine.impl.cfg.BeansConfigurationHelper;
import org.flowable.common.engine.impl.cfg.IdGenerator;
import org.flowable.common.engine.impl.db.DbSqlSessionFactory;
import org.flowable.common.engine.impl.event.FlowableEventDispatcherImpl;
import org.flowable.common.engine.impl.interceptor.CommandConfig;
import org.flowable.common.engine.impl.interceptor.CommandInterceptor;
import org.flowable.common.engine.impl.interceptor.EngineConfigurationConstants;
import org.flowable.common.engine.impl.interceptor.SessionFactory;
import org.flowable.common.engine.impl.persistence.entity.TableDataManager;
import org.flowable.common.engine.impl.runtime.Clock;
import org.flowable.idm.api.IdmEngineConfigurationApi;
import org.flowable.idm.api.IdmIdentityService;
import org.flowable.idm.api.IdmManagementService;
import org.flowable.idm.api.PasswordEncoder;
import org.flowable.idm.api.PasswordSalt;
import org.flowable.idm.api.event.FlowableIdmEventType;
import org.flowable.idm.engine.impl.IdmEngineImpl;
import org.flowable.idm.engine.impl.IdmIdentityServiceImpl;
import org.flowable.idm.engine.impl.IdmManagementServiceImpl;
import org.flowable.idm.engine.impl.SchemaOperationsIdmEngineBuild;
import org.flowable.idm.engine.impl.authentication.BlankSalt;
import org.flowable.idm.engine.impl.authentication.ClearTextPasswordEncoder;
import org.flowable.idm.engine.impl.cfg.StandaloneIdmEngineConfiguration;
import org.flowable.idm.engine.impl.cfg.StandaloneInMemIdmEngineConfiguration;
import org.flowable.idm.engine.impl.db.EntityDependencyOrder;
import org.flowable.idm.engine.impl.db.IdmDbSchemaManager;
import org.flowable.idm.engine.impl.persistence.entity.ByteArrayEntityManager;
import org.flowable.idm.engine.impl.persistence.entity.ByteArrayEntityManagerImpl;
import org.flowable.idm.engine.impl.persistence.entity.GroupEntityManager;
import org.flowable.idm.engine.impl.persistence.entity.GroupEntityManagerImpl;
import org.flowable.idm.engine.impl.persistence.entity.IdentityInfoEntityManager;
import org.flowable.idm.engine.impl.persistence.entity.IdentityInfoEntityManagerImpl;
import org.flowable.idm.engine.impl.persistence.entity.MembershipEntityManager;
import org.flowable.idm.engine.impl.persistence.entity.MembershipEntityManagerImpl;
import org.flowable.idm.engine.impl.persistence.entity.PrivilegeEntityManager;
import org.flowable.idm.engine.impl.persistence.entity.PrivilegeEntityManagerImpl;
import org.flowable.idm.engine.impl.persistence.entity.PrivilegeMappingEntityManager;
import org.flowable.idm.engine.impl.persistence.entity.PrivilegeMappingEntityManagerImpl;
import org.flowable.idm.engine.impl.persistence.entity.PropertyEntityManager;
import org.flowable.idm.engine.impl.persistence.entity.PropertyEntityManagerImpl;
import org.flowable.idm.engine.impl.persistence.entity.TokenEntityManager;
import org.flowable.idm.engine.impl.persistence.entity.TokenEntityManagerImpl;
import org.flowable.idm.engine.impl.persistence.entity.UserEntityManager;
import org.flowable.idm.engine.impl.persistence.entity.UserEntityManagerImpl;
import org.flowable.idm.engine.impl.persistence.entity.data.ByteArrayDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.GroupDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.IdentityInfoDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.MembershipDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.PrivilegeDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.PrivilegeMappingDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.PropertyDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.TokenDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.UserDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.impl.MybatisByteArrayDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.impl.MybatisGroupDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.impl.MybatisIdentityInfoDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.impl.MybatisMembershipDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.impl.MybatisPrivilegeDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.impl.MybatisPrivilegeMappingDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.impl.MybatisPropertyDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.impl.MybatisTokenDataManager;
import org.flowable.idm.engine.impl.persistence.entity.data.impl.MybatisUserDataManager;

public class IdmEngineConfiguration extends AbstractEngineConfiguration implements IdmEngineConfigurationApi {

    public static final String DEFAULT_MYBATIS_MAPPING_FILE = &quot;org/flowable/idm/db/mapping/mappings.xml&quot;;

<span class="nc" id="L94">    protected String idmEngineName = IdmEngines.NAME_DEFAULT;</span>

    // SERVICES
    // /////////////////////////////////////////////////////////////////

<span class="nc" id="L99">    protected IdmIdentityService idmIdentityService = new IdmIdentityServiceImpl(this);</span>
<span class="nc" id="L100">    protected IdmManagementService idmManagementService = new IdmManagementServiceImpl(this);</span>

    // DATA MANAGERS ///////////////////////////////////////////////////

    protected ByteArrayDataManager idmByteArrayDataManager;
    protected GroupDataManager groupDataManager;
    protected IdentityInfoDataManager identityInfoDataManager;
    protected MembershipDataManager membershipDataManager;
    protected PropertyDataManager idmPropertyDataManager;
    protected TokenDataManager tokenDataManager;
    protected UserDataManager userDataManager;
    protected PrivilegeDataManager privilegeDataManager;
    protected PrivilegeMappingDataManager privilegeMappingDataManager;

    // ENTITY MANAGERS /////////////////////////////////////////////////
    protected ByteArrayEntityManager idmByteArrayEntityManager;
    protected GroupEntityManager groupEntityManager;
    protected IdentityInfoEntityManager identityInfoEntityManager;
    protected MembershipEntityManager membershipEntityManager;
    protected PropertyEntityManager idmPropertyEntityManager;
    protected TokenEntityManager tokenEntityManager;
    protected UserEntityManager userEntityManager;
    protected PrivilegeEntityManager privilegeEntityManager;
    protected PrivilegeMappingEntityManager privilegeMappingEntityManager;

    protected PasswordEncoder passwordEncoder;
    protected PasswordSalt passwordSalt;

    public static IdmEngineConfiguration createIdmEngineConfigurationFromResourceDefault() {
<span class="nc" id="L129">        return createIdmEngineConfigurationFromResource(&quot;flowable.idm.cfg.xml&quot;, &quot;idmEngineConfiguration&quot;);</span>
    }

    public static IdmEngineConfiguration createIdmEngineConfigurationFromResource(String resource) {
<span class="nc" id="L133">        return createIdmEngineConfigurationFromResource(resource, &quot;idmEngineConfiguration&quot;);</span>
    }

    public static IdmEngineConfiguration createIdmEngineConfigurationFromResource(String resource, String beanName) {
<span class="nc" id="L137">        return (IdmEngineConfiguration) BeansConfigurationHelper.parseEngineConfigurationFromResource(resource, beanName);</span>
    }

    public static IdmEngineConfiguration createIdmEngineConfigurationFromInputStream(InputStream inputStream) {
<span class="nc" id="L141">        return createIdmEngineConfigurationFromInputStream(inputStream, &quot;idmEngineConfiguration&quot;);</span>
    }

    public static IdmEngineConfiguration createIdmEngineConfigurationFromInputStream(InputStream inputStream, String beanName) {
<span class="nc" id="L145">        return (IdmEngineConfiguration) BeansConfigurationHelper.parseEngineConfigurationFromInputStream(inputStream, beanName);</span>
    }

    public static IdmEngineConfiguration createStandaloneIdmEngineConfiguration() {
<span class="nc" id="L149">        return new StandaloneIdmEngineConfiguration();</span>
    }

    public static IdmEngineConfiguration createStandaloneInMemIdmEngineConfiguration() {
<span class="nc" id="L153">        return new StandaloneInMemIdmEngineConfiguration();</span>
    }

<span class="nc" id="L156">    public IdmEngineConfiguration() {</span>
<span class="nc" id="L157">    }</span>

    // buildProcessEngine
    // ///////////////////////////////////////////////////////

    public IdmEngine buildIdmEngine() {
<span class="nc" id="L163">        init();</span>
<span class="nc" id="L164">        return new IdmEngineImpl(this);</span>
    }

    // init
    // /////////////////////////////////////////////////////////////////////

    protected void init() {
<span class="nc" id="L171">        initEngineConfigurations();</span>
<span class="nc" id="L172">        initClock();</span>
<span class="nc" id="L173">        initObjectMapper();</span>
<span class="nc" id="L174">        initCommandContextFactory();</span>
<span class="nc" id="L175">        initTransactionContextFactory();</span>
<span class="nc" id="L176">        initCommandExecutors();</span>
<span class="nc" id="L177">        initIdGenerator();</span>

<span class="nc bnc" id="L179" title="All 2 branches missed.">        if (usingRelationalDatabase) {</span>
<span class="nc" id="L180">            initDataSource();</span>
        }
        
<span class="nc bnc" id="L183" title="All 4 branches missed.">        if (usingRelationalDatabase || usingSchemaMgmt) {</span>
<span class="nc" id="L184">            initSchemaManager();</span>
<span class="nc" id="L185">            initSchemaManagementCommand();</span>
        }

<span class="nc" id="L188">        initBeans();</span>
<span class="nc" id="L189">        initTransactionFactory();</span>

<span class="nc bnc" id="L191" title="All 2 branches missed.">        if (usingRelationalDatabase) {</span>
<span class="nc" id="L192">            initSqlSessionFactory();</span>
        }

<span class="nc" id="L195">        initSessionFactories();</span>
<span class="nc" id="L196">        initPasswordEncoder();</span>
<span class="nc" id="L197">        initServices();</span>
<span class="nc" id="L198">        initDataManagers();</span>
<span class="nc" id="L199">        initEntityManagers();</span>
<span class="nc" id="L200">        initEventDispatcher();</span>
<span class="nc" id="L201">    }</span>

    @Override
    public void initSchemaManager() {
<span class="nc" id="L205">        super.initSchemaManager();</span>
<span class="nc bnc" id="L206" title="All 2 branches missed.">        if (this.schemaManager == null) {</span>
<span class="nc" id="L207">            this.schemaManager = new IdmDbSchemaManager();</span>
        }
<span class="nc" id="L209">    }</span>
    
    public void initSchemaManagementCommand() {
<span class="nc bnc" id="L212" title="All 2 branches missed.">        if (schemaManagementCmd == null) {</span>
<span class="nc bnc" id="L213" title="All 4 branches missed.">            if (usingRelationalDatabase &amp;&amp; databaseSchemaUpdate != null) {</span>
<span class="nc" id="L214">                this.schemaManagementCmd = new SchemaOperationsIdmEngineBuild();</span>
            }
        }
<span class="nc" id="L217">    }</span>

    // services
    // /////////////////////////////////////////////////////////////////

    protected void initServices() {
<span class="nc" id="L223">        initService(idmIdentityService);</span>
<span class="nc" id="L224">        initService(idmManagementService);</span>
<span class="nc" id="L225">    }</span>

    // Data managers
    ///////////////////////////////////////////////////////////

    @Override
    public void initDataManagers() {
<span class="nc" id="L232">        super.initDataManagers();</span>
<span class="nc bnc" id="L233" title="All 2 branches missed.">        if (idmByteArrayDataManager == null) {</span>
<span class="nc" id="L234">            idmByteArrayDataManager = new MybatisByteArrayDataManager(this);</span>
        }
<span class="nc bnc" id="L236" title="All 2 branches missed.">        if (groupDataManager == null) {</span>
<span class="nc" id="L237">            groupDataManager = new MybatisGroupDataManager(this);</span>
        }
<span class="nc bnc" id="L239" title="All 2 branches missed.">        if (identityInfoDataManager == null) {</span>
<span class="nc" id="L240">            identityInfoDataManager = new MybatisIdentityInfoDataManager(this);</span>
        }
<span class="nc bnc" id="L242" title="All 2 branches missed.">        if (membershipDataManager == null) {</span>
<span class="nc" id="L243">            membershipDataManager = new MybatisMembershipDataManager(this);</span>
        }
<span class="nc bnc" id="L245" title="All 2 branches missed.">        if (idmPropertyDataManager == null) {</span>
<span class="nc" id="L246">            idmPropertyDataManager = new MybatisPropertyDataManager(this);</span>
        }
<span class="nc bnc" id="L248" title="All 2 branches missed.">        if (tokenDataManager == null) {</span>
<span class="nc" id="L249">            tokenDataManager = new MybatisTokenDataManager(this);</span>
        }
<span class="nc bnc" id="L251" title="All 2 branches missed.">        if (userDataManager == null) {</span>
<span class="nc" id="L252">            userDataManager = new MybatisUserDataManager(this);</span>
        }
<span class="nc bnc" id="L254" title="All 2 branches missed.">        if (privilegeDataManager == null) {</span>
<span class="nc" id="L255">            privilegeDataManager = new MybatisPrivilegeDataManager(this);</span>
        }
<span class="nc bnc" id="L257" title="All 2 branches missed.">        if (privilegeMappingDataManager == null) {</span>
<span class="nc" id="L258">            privilegeMappingDataManager = new MybatisPrivilegeMappingDataManager(getIdmEngineConfiguration());</span>
        }
<span class="nc" id="L260">    }</span>

    @Override
    public void initEntityManagers() {
<span class="nc" id="L264">        super.initEntityManagers();</span>
<span class="nc bnc" id="L265" title="All 2 branches missed.">        if (idmByteArrayEntityManager == null) {</span>
<span class="nc" id="L266">            idmByteArrayEntityManager = new ByteArrayEntityManagerImpl(this, idmByteArrayDataManager);</span>
        }
<span class="nc bnc" id="L268" title="All 2 branches missed.">        if (groupEntityManager == null) {</span>
<span class="nc" id="L269">            groupEntityManager = new GroupEntityManagerImpl(this, groupDataManager);</span>
        }
<span class="nc bnc" id="L271" title="All 2 branches missed.">        if (identityInfoEntityManager == null) {</span>
<span class="nc" id="L272">            identityInfoEntityManager = new IdentityInfoEntityManagerImpl(this, identityInfoDataManager);</span>
        }
<span class="nc bnc" id="L274" title="All 2 branches missed.">        if (membershipEntityManager == null) {</span>
<span class="nc" id="L275">            membershipEntityManager = new MembershipEntityManagerImpl(this, membershipDataManager);</span>
        }
<span class="nc bnc" id="L277" title="All 2 branches missed.">        if (idmPropertyEntityManager == null) {</span>
<span class="nc" id="L278">            idmPropertyEntityManager = new PropertyEntityManagerImpl(this, idmPropertyDataManager);</span>
        }
<span class="nc bnc" id="L280" title="All 2 branches missed.">        if (tokenEntityManager == null) {</span>
<span class="nc" id="L281">            tokenEntityManager = new TokenEntityManagerImpl(this, tokenDataManager);</span>
        }
<span class="nc bnc" id="L283" title="All 2 branches missed.">        if (userEntityManager == null) {</span>
<span class="nc" id="L284">            userEntityManager = new UserEntityManagerImpl(this, userDataManager);</span>
        }
<span class="nc bnc" id="L286" title="All 2 branches missed.">        if (privilegeEntityManager == null) {</span>
<span class="nc" id="L287">            privilegeEntityManager = new PrivilegeEntityManagerImpl(this, privilegeDataManager);</span>
        }
<span class="nc bnc" id="L289" title="All 2 branches missed.">        if (privilegeMappingEntityManager == null) {</span>
<span class="nc" id="L290">            privilegeMappingEntityManager = new PrivilegeMappingEntityManagerImpl(this, privilegeMappingDataManager);</span>
        }
<span class="nc" id="L292">    }</span>

    // session factories ////////////////////////////////////////////////////////

    @Override
    public void initDbSqlSessionFactory() {
<span class="nc bnc" id="L298" title="All 2 branches missed.">        if (dbSqlSessionFactory == null) {</span>
<span class="nc" id="L299">            dbSqlSessionFactory = createDbSqlSessionFactory();</span>
<span class="nc" id="L300">            dbSqlSessionFactory.setDatabaseType(databaseType);</span>
<span class="nc" id="L301">            dbSqlSessionFactory.setSqlSessionFactory(sqlSessionFactory);</span>
<span class="nc" id="L302">            dbSqlSessionFactory.setDatabaseTablePrefix(databaseTablePrefix);</span>
<span class="nc" id="L303">            dbSqlSessionFactory.setTablePrefixIsSchema(tablePrefixIsSchema);</span>
<span class="nc" id="L304">            dbSqlSessionFactory.setDatabaseCatalog(databaseCatalog);</span>
<span class="nc" id="L305">            dbSqlSessionFactory.setDatabaseSchema(databaseSchema);</span>
<span class="nc" id="L306">            addSessionFactory(dbSqlSessionFactory);</span>
        }
<span class="nc" id="L308">        initDbSqlSessionFactoryEntitySettings();</span>
<span class="nc" id="L309">    }</span>

    @Override
    public DbSqlSessionFactory createDbSqlSessionFactory() {
<span class="nc" id="L313">        return new DbSqlSessionFactory(usePrefixId);</span>
    }

    @Override
    protected void initDbSqlSessionFactoryEntitySettings() {
<span class="nc" id="L318">        defaultInitDbSqlSessionFactoryEntitySettings(EntityDependencyOrder.INSERT_ORDER, EntityDependencyOrder.DELETE_ORDER);</span>
<span class="nc" id="L319">    }</span>

    public void initPasswordEncoder() {
<span class="nc bnc" id="L322" title="All 2 branches missed.">        if (passwordEncoder == null) {</span>
<span class="nc" id="L323">            passwordEncoder = ClearTextPasswordEncoder.getInstance();</span>
        }

<span class="nc bnc" id="L326" title="All 2 branches missed.">        if (passwordSalt == null) {</span>
<span class="nc" id="L327">            passwordSalt = BlankSalt.getInstance();</span>
        }
<span class="nc" id="L329">    }</span>

    // command executors
    // ////////////////////////////////////////////////////////

    @Override
    public void initCommandExecutors() {
<span class="nc" id="L336">        initDefaultCommandConfig();</span>
<span class="nc" id="L337">        initSchemaCommandConfig();</span>
<span class="nc" id="L338">        initCommandInvoker();</span>
<span class="nc" id="L339">        initCommandInterceptors();</span>
<span class="nc" id="L340">        initCommandExecutor();</span>
<span class="nc" id="L341">    }</span>

    @Override
    public void initCommandInterceptors() {
<span class="nc bnc" id="L345" title="All 2 branches missed.">        if (commandInterceptors == null) {</span>
<span class="nc" id="L346">            commandInterceptors = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L347" title="All 2 branches missed.">            if (customPreCommandInterceptors != null) {</span>
<span class="nc" id="L348">                commandInterceptors.addAll(customPreCommandInterceptors);</span>
            }
<span class="nc" id="L350">            commandInterceptors.addAll(getDefaultCommandInterceptors());</span>
<span class="nc bnc" id="L351" title="All 2 branches missed.">            if (customPostCommandInterceptors != null) {</span>
<span class="nc" id="L352">                commandInterceptors.addAll(customPostCommandInterceptors);</span>
            }
<span class="nc" id="L354">            commandInterceptors.add(commandInvoker);</span>
        }
<span class="nc" id="L356">    }</span>

    @Override
    public String getEngineCfgKey() {
<span class="nc" id="L360">        return EngineConfigurationConstants.KEY_IDM_ENGINE_CONFIG;</span>
    }
    
    @Override
    public String getEngineScopeType() {
<span class="nc" id="L365">        return &quot;idm&quot;;</span>
    }

    @Override
    public CommandInterceptor createTransactionInterceptor() {
        // Should be overridden by subclasses
<span class="nc" id="L371">        return null;</span>
    }

    // OTHER
    // ////////////////////////////////////////////////////////////////////

    @Override
    public InputStream getMyBatisXmlConfigurationStream() {
<span class="nc" id="L379">        return getResourceAsStream(DEFAULT_MYBATIS_MAPPING_FILE);</span>
    }

    @Override
    public void initEventDispatcher() {
<span class="nc bnc" id="L384" title="All 2 branches missed.">        if (this.eventDispatcher == null) {</span>
<span class="nc" id="L385">            this.eventDispatcher = new FlowableEventDispatcherImpl();</span>
        }

<span class="nc" id="L388">        this.eventDispatcher.setEnabled(enableEventDispatcher);</span>

<span class="nc bnc" id="L390" title="All 2 branches missed.">        if (eventListeners != null) {</span>
<span class="nc bnc" id="L391" title="All 2 branches missed.">            for (FlowableEventListener listenerToAdd : eventListeners) {</span>
<span class="nc" id="L392">                this.eventDispatcher.addEventListener(listenerToAdd);</span>
<span class="nc" id="L393">            }</span>
        }

<span class="nc bnc" id="L396" title="All 2 branches missed.">        if (typedEventListeners != null) {</span>
<span class="nc bnc" id="L397" title="All 2 branches missed.">            for (Entry&lt;String, List&lt;FlowableEventListener&gt;&gt; listenersToAdd : typedEventListeners.entrySet()) {</span>
                // Extract types from the given string
<span class="nc" id="L399">                FlowableIdmEventType[] types = FlowableIdmEventType.getTypesFromString(listenersToAdd.getKey());</span>

<span class="nc bnc" id="L401" title="All 2 branches missed.">                for (FlowableEventListener listenerToAdd : listenersToAdd.getValue()) {</span>
<span class="nc" id="L402">                    this.eventDispatcher.addEventListener(listenerToAdd, types);</span>
<span class="nc" id="L403">                }</span>
<span class="nc" id="L404">            }</span>
        }

<span class="nc" id="L407">    }</span>

    // getters and setters
    // //////////////////////////////////////////////////////

    @Override
    public String getEngineName() {
<span class="nc" id="L414">        return idmEngineName;</span>
    }

    public IdmEngineConfiguration setEngineName(String idmEngineName) {
<span class="nc" id="L418">        this.idmEngineName = idmEngineName;</span>
<span class="nc" id="L419">        return this;</span>
    }


    @Override
    public IdmEngineConfiguration setJdbcPassword(String jdbcPassword) {
<span class="nc" id="L425">        this.jdbcPassword = jdbcPassword;</span>
<span class="nc" id="L426">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setJdbcMaxActiveConnections(int jdbcMaxActiveConnections) {
<span class="nc" id="L431">        this.jdbcMaxActiveConnections = jdbcMaxActiveConnections;</span>
<span class="nc" id="L432">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setJdbcMaxIdleConnections(int jdbcMaxIdleConnections) {
<span class="nc" id="L437">        this.jdbcMaxIdleConnections = jdbcMaxIdleConnections;</span>
<span class="nc" id="L438">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setJdbcMaxCheckoutTime(int jdbcMaxCheckoutTime) {
<span class="nc" id="L443">        this.jdbcMaxCheckoutTime = jdbcMaxCheckoutTime;</span>
<span class="nc" id="L444">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setJdbcMaxWaitTime(int jdbcMaxWaitTime) {
<span class="nc" id="L449">        this.jdbcMaxWaitTime = jdbcMaxWaitTime;</span>
<span class="nc" id="L450">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setJdbcPingEnabled(boolean jdbcPingEnabled) {
<span class="nc" id="L455">        this.jdbcPingEnabled = jdbcPingEnabled;</span>
<span class="nc" id="L456">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setJdbcPingConnectionNotUsedFor(int jdbcPingConnectionNotUsedFor) {
<span class="nc" id="L461">        this.jdbcPingConnectionNotUsedFor = jdbcPingConnectionNotUsedFor;</span>
<span class="nc" id="L462">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setJdbcDefaultTransactionIsolationLevel(int jdbcDefaultTransactionIsolationLevel) {
<span class="nc" id="L467">        this.jdbcDefaultTransactionIsolationLevel = jdbcDefaultTransactionIsolationLevel;</span>
<span class="nc" id="L468">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setJdbcPingQuery(String jdbcPingQuery) {
<span class="nc" id="L473">        this.jdbcPingQuery = jdbcPingQuery;</span>
<span class="nc" id="L474">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setDataSourceJndiName(String dataSourceJndiName) {
<span class="nc" id="L479">        this.dataSourceJndiName = dataSourceJndiName;</span>
<span class="nc" id="L480">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setSchemaCommandConfig(CommandConfig schemaCommandConfig) {
<span class="nc" id="L485">        this.schemaCommandConfig = schemaCommandConfig;</span>
<span class="nc" id="L486">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setTransactionsExternallyManaged(boolean transactionsExternallyManaged) {
<span class="nc" id="L491">        this.transactionsExternallyManaged = transactionsExternallyManaged;</span>
<span class="nc" id="L492">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setIdGenerator(IdGenerator idGenerator) {
<span class="nc" id="L497">        this.idGenerator = idGenerator;</span>
<span class="nc" id="L498">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setXmlEncoding(String xmlEncoding) {
<span class="nc" id="L503">        this.xmlEncoding = xmlEncoding;</span>
<span class="nc" id="L504">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setBeans(Map&lt;Object, Object&gt; beans) {
<span class="nc" id="L509">        this.beans = beans;</span>
<span class="nc" id="L510">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setDefaultCommandConfig(CommandConfig defaultCommandConfig) {
<span class="nc" id="L515">        this.defaultCommandConfig = defaultCommandConfig;</span>
<span class="nc" id="L516">        return this;</span>
    }

    @Override
    public IdmIdentityService getIdmIdentityService() {
<span class="nc" id="L521">        return idmIdentityService;</span>
    }

    public IdmEngineConfiguration setIdmIdentityService(IdmIdentityService idmIdentityService) {
<span class="nc" id="L525">        this.idmIdentityService = idmIdentityService;</span>
<span class="nc" id="L526">        return this;</span>
    }

    @Override
    public IdmManagementService getIdmManagementService() {
<span class="nc" id="L531">        return idmManagementService;</span>
    }

    public IdmEngineConfiguration setIdmManagementService(IdmManagementService idmManagementService) {
<span class="nc" id="L535">        this.idmManagementService = idmManagementService;</span>
<span class="nc" id="L536">        return this;</span>
    }

    public IdmEngineConfiguration getIdmEngineConfiguration() {
<span class="nc" id="L540">        return this;</span>
    }

    public ByteArrayDataManager getIdmByteArrayDataManager() {
<span class="nc" id="L544">        return idmByteArrayDataManager;</span>
    }

    public IdmEngineConfiguration setIdmByteArrayDataManager(ByteArrayDataManager idmByteArrayDataManager) {
<span class="nc" id="L548">        this.idmByteArrayDataManager = idmByteArrayDataManager;</span>
<span class="nc" id="L549">        return this;</span>
    }

    public GroupDataManager getGroupDataManager() {
<span class="nc" id="L553">        return groupDataManager;</span>
    }

    public IdmEngineConfiguration setGroupDataManager(GroupDataManager groupDataManager) {
<span class="nc" id="L557">        this.groupDataManager = groupDataManager;</span>
<span class="nc" id="L558">        return this;</span>
    }

    public IdentityInfoDataManager getIdentityInfoDataManager() {
<span class="nc" id="L562">        return identityInfoDataManager;</span>
    }

    public IdmEngineConfiguration setIdentityInfoDataManager(IdentityInfoDataManager identityInfoDataManager) {
<span class="nc" id="L566">        this.identityInfoDataManager = identityInfoDataManager;</span>
<span class="nc" id="L567">        return this;</span>
    }

    public MembershipDataManager getMembershipDataManager() {
<span class="nc" id="L571">        return membershipDataManager;</span>
    }

    public IdmEngineConfiguration setMembershipDataManager(MembershipDataManager membershipDataManager) {
<span class="nc" id="L575">        this.membershipDataManager = membershipDataManager;</span>
<span class="nc" id="L576">        return this;</span>
    }

    public PropertyDataManager getIdmPropertyDataManager() {
<span class="nc" id="L580">        return idmPropertyDataManager;</span>
    }

    public IdmEngineConfiguration setIdmPropertyDataManager(PropertyDataManager idmPropertyDataManager) {
<span class="nc" id="L584">        this.idmPropertyDataManager = idmPropertyDataManager;</span>
<span class="nc" id="L585">        return this;</span>
    }

    public TokenDataManager getTokenDataManager() {
<span class="nc" id="L589">        return tokenDataManager;</span>
    }

    public IdmEngineConfiguration setTokenDataManager(TokenDataManager tokenDataManager) {
<span class="nc" id="L593">        this.tokenDataManager = tokenDataManager;</span>
<span class="nc" id="L594">        return this;</span>
    }

    public UserDataManager getUserDataManager() {
<span class="nc" id="L598">        return userDataManager;</span>
    }

    public IdmEngineConfiguration setUserDataManager(UserDataManager userDataManager) {
<span class="nc" id="L602">        this.userDataManager = userDataManager;</span>
<span class="nc" id="L603">        return this;</span>
    }

    public PrivilegeDataManager getPrivilegeDataManager() {
<span class="nc" id="L607">        return privilegeDataManager;</span>
    }

    public IdmEngineConfiguration setPrivilegeDataManager(PrivilegeDataManager privilegeDataManager) {
<span class="nc" id="L611">        this.privilegeDataManager = privilegeDataManager;</span>
<span class="nc" id="L612">        return this;</span>
    }

    public PrivilegeMappingDataManager getPrivilegeMappingDataManager() {
<span class="nc" id="L616">        return privilegeMappingDataManager;</span>
    }

    public IdmEngineConfiguration setPrivilegeMappingDataManager(PrivilegeMappingDataManager privilegeMappingDataManager) {
<span class="nc" id="L620">        this.privilegeMappingDataManager = privilegeMappingDataManager;</span>
<span class="nc" id="L621">        return this;</span>
    }

    public ByteArrayEntityManager getIdmByteArrayEntityManager() {
<span class="nc" id="L625">        return idmByteArrayEntityManager;</span>
    }

    public IdmEngineConfiguration setIdmByteArrayEntityManager(ByteArrayEntityManager idmByteArrayEntityManager) {
<span class="nc" id="L629">        this.idmByteArrayEntityManager = idmByteArrayEntityManager;</span>
<span class="nc" id="L630">        return this;</span>
    }

    public GroupEntityManager getGroupEntityManager() {
<span class="nc" id="L634">        return groupEntityManager;</span>
    }

    public IdmEngineConfiguration setGroupEntityManager(GroupEntityManager groupEntityManager) {
<span class="nc" id="L638">        this.groupEntityManager = groupEntityManager;</span>
<span class="nc" id="L639">        return this;</span>
    }

    public IdentityInfoEntityManager getIdentityInfoEntityManager() {
<span class="nc" id="L643">        return identityInfoEntityManager;</span>
    }

    public IdmEngineConfiguration setIdentityInfoEntityManager(IdentityInfoEntityManager identityInfoEntityManager) {
<span class="nc" id="L647">        this.identityInfoEntityManager = identityInfoEntityManager;</span>
<span class="nc" id="L648">        return this;</span>
    }

    public MembershipEntityManager getMembershipEntityManager() {
<span class="nc" id="L652">        return membershipEntityManager;</span>
    }

    public IdmEngineConfiguration setMembershipEntityManager(MembershipEntityManager membershipEntityManager) {
<span class="nc" id="L656">        this.membershipEntityManager = membershipEntityManager;</span>
<span class="nc" id="L657">        return this;</span>
    }

    public PropertyEntityManager getIdmPropertyEntityManager() {
<span class="nc" id="L661">        return idmPropertyEntityManager;</span>
    }

    public IdmEngineConfiguration setIdmPropertyEntityManager(PropertyEntityManager idmPropertyEntityManager) {
<span class="nc" id="L665">        this.idmPropertyEntityManager = idmPropertyEntityManager;</span>
<span class="nc" id="L666">        return this;</span>
    }

    public TokenEntityManager getTokenEntityManager() {
<span class="nc" id="L670">        return tokenEntityManager;</span>
    }

    public IdmEngineConfiguration setTokenEntityManager(TokenEntityManager tokenEntityManager) {
<span class="nc" id="L674">        this.tokenEntityManager = tokenEntityManager;</span>
<span class="nc" id="L675">        return this;</span>
    }

    public UserEntityManager getUserEntityManager() {
<span class="nc" id="L679">        return userEntityManager;</span>
    }

    public IdmEngineConfiguration setUserEntityManager(UserEntityManager userEntityManager) {
<span class="nc" id="L683">        this.userEntityManager = userEntityManager;</span>
<span class="nc" id="L684">        return this;</span>
    }

    public PrivilegeEntityManager getPrivilegeEntityManager() {
<span class="nc" id="L688">        return privilegeEntityManager;</span>
    }

    public IdmEngineConfiguration setPrivilegeEntityManager(PrivilegeEntityManager privilegeEntityManager) {
<span class="nc" id="L692">        this.privilegeEntityManager = privilegeEntityManager;</span>
<span class="nc" id="L693">        return this;</span>
    }

    public PrivilegeMappingEntityManager getPrivilegeMappingEntityManager() {
<span class="nc" id="L697">        return privilegeMappingEntityManager;</span>
    }

    public IdmEngineConfiguration setPrivilegeMappingEntityManager(PrivilegeMappingEntityManager privilegeMappingEntityManager) {
<span class="nc" id="L701">        this.privilegeMappingEntityManager = privilegeMappingEntityManager;</span>
<span class="nc" id="L702">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setTableDataManager(TableDataManager tableDataManager) {
<span class="nc" id="L707">        this.tableDataManager = tableDataManager;</span>
<span class="nc" id="L708">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setSqlSessionFactory(SqlSessionFactory sqlSessionFactory) {
<span class="nc" id="L713">        this.sqlSessionFactory = sqlSessionFactory;</span>
<span class="nc" id="L714">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setTransactionFactory(TransactionFactory transactionFactory) {
<span class="nc" id="L719">        this.transactionFactory = transactionFactory;</span>
<span class="nc" id="L720">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setCustomMybatisMappers(Set&lt;Class&lt;?&gt;&gt; customMybatisMappers) {
<span class="nc" id="L725">        this.customMybatisMappers = customMybatisMappers;</span>
<span class="nc" id="L726">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setCustomMybatisXMLMappers(Set&lt;String&gt; customMybatisXMLMappers) {
<span class="nc" id="L731">        this.customMybatisXMLMappers = customMybatisXMLMappers;</span>
<span class="nc" id="L732">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setCustomSessionFactories(List&lt;SessionFactory&gt; customSessionFactories) {
<span class="nc" id="L737">        this.customSessionFactories = customSessionFactories;</span>
<span class="nc" id="L738">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setUsingRelationalDatabase(boolean usingRelationalDatabase) {
<span class="nc" id="L743">        this.usingRelationalDatabase = usingRelationalDatabase;</span>
<span class="nc" id="L744">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setDatabaseTablePrefix(String databaseTablePrefix) {
<span class="nc" id="L749">        this.databaseTablePrefix = databaseTablePrefix;</span>
<span class="nc" id="L750">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setDatabaseWildcardEscapeCharacter(String databaseWildcardEscapeCharacter) {
<span class="nc" id="L755">        this.databaseWildcardEscapeCharacter = databaseWildcardEscapeCharacter;</span>
<span class="nc" id="L756">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setDatabaseCatalog(String databaseCatalog) {
<span class="nc" id="L761">        this.databaseCatalog = databaseCatalog;</span>
<span class="nc" id="L762">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setDatabaseSchema(String databaseSchema) {
<span class="nc" id="L767">        this.databaseSchema = databaseSchema;</span>
<span class="nc" id="L768">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setTablePrefixIsSchema(boolean tablePrefixIsSchema) {
<span class="nc" id="L773">        this.tablePrefixIsSchema = tablePrefixIsSchema;</span>
<span class="nc" id="L774">        return this;</span>
    }

    public PasswordEncoder getPasswordEncoder() {
<span class="nc" id="L778">        return passwordEncoder;</span>
    }

    public IdmEngineConfiguration setPasswordEncoder(PasswordEncoder passwordEncoder) {
<span class="nc" id="L782">        this.passwordEncoder = passwordEncoder;</span>
<span class="nc" id="L783">        return this;</span>
    }

    public PasswordSalt getPasswordSalt() {
<span class="nc" id="L787">        return passwordSalt;</span>
    }

    public IdmEngineConfiguration setPasswordSalt(PasswordSalt passwordSalt) {
<span class="nc" id="L791">        this.passwordSalt = passwordSalt;</span>
<span class="nc" id="L792">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setSessionFactories(Map&lt;Class&lt;?&gt;, SessionFactory&gt; sessionFactories) {
<span class="nc" id="L797">        this.sessionFactories = sessionFactories;</span>
<span class="nc" id="L798">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setDatabaseSchemaUpdate(String databaseSchemaUpdate) {
<span class="nc" id="L803">        this.databaseSchemaUpdate = databaseSchemaUpdate;</span>
<span class="nc" id="L804">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setEnableEventDispatcher(boolean enableEventDispatcher) {
<span class="nc" id="L809">        this.enableEventDispatcher = enableEventDispatcher;</span>
<span class="nc" id="L810">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setEventDispatcher(FlowableEventDispatcher eventDispatcher) {
<span class="nc" id="L815">        this.eventDispatcher = eventDispatcher;</span>
<span class="nc" id="L816">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setEventListeners(List&lt;FlowableEventListener&gt; eventListeners) {
<span class="nc" id="L821">        this.eventListeners = eventListeners;</span>
<span class="nc" id="L822">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setTypedEventListeners(Map&lt;String, List&lt;FlowableEventListener&gt;&gt; typedEventListeners) {
<span class="nc" id="L827">        this.typedEventListeners = typedEventListeners;</span>
<span class="nc" id="L828">        return this;</span>
    }

    @Override
    public IdmEngineConfiguration setClock(Clock clock) {
<span class="nc" id="L833">        this.clock = clock;</span>
<span class="nc" id="L834">        return this;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>