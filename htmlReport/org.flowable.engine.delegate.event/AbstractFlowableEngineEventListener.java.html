<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AbstractFlowableEngineEventListener.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">jacoco.exec</a> &gt; <a href="index.source.html" class="el_package">org.flowable.engine.delegate.event</a> &gt; <span class="el_source">AbstractFlowableEngineEventListener.java</span></div><h1>AbstractFlowableEngineEventListener.java</h1><pre class="source lang-java linenums">/* Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
package org.flowable.engine.delegate.event;

import java.util.Collection;
import java.util.Set;

import org.flowable.common.engine.api.delegate.event.AbstractFlowableEventListener;
import org.flowable.common.engine.api.delegate.event.FlowableEngineEntityEvent;
import org.flowable.common.engine.api.delegate.event.FlowableEngineEvent;
import org.flowable.common.engine.api.delegate.event.FlowableEngineEventType;
import org.flowable.common.engine.api.delegate.event.FlowableEvent;
import org.flowable.common.engine.api.delegate.event.FlowableEventType;
import org.flowable.common.engine.impl.interceptor.CommandContext;
import org.flowable.engine.delegate.DelegateExecution;
import org.flowable.engine.impl.util.CommandContextUtil;
import org.flowable.variable.api.event.FlowableVariableEvent;

/**
 *  @author Robert Hafner
 */
public abstract class AbstractFlowableEngineEventListener extends AbstractFlowableEventListener {

    protected Set&lt;FlowableEngineEventType&gt; types;

<span class="nc" id="L37">    public AbstractFlowableEngineEventListener() {}</span>

<span class="nc" id="L39">    public AbstractFlowableEngineEventListener(Set&lt;FlowableEngineEventType&gt; types) {</span>
<span class="nc" id="L40">        this.types = types;</span>
<span class="nc" id="L41">    }</span>

    @Override
    public void onEvent(FlowableEvent flowableEvent) {
<span class="nc bnc" id="L45" title="All 2 branches missed.">        if (flowableEvent instanceof FlowableEngineEvent) {</span>
<span class="nc" id="L46">            FlowableEngineEvent flowableEngineEvent = (FlowableEngineEvent) flowableEvent;</span>
<span class="nc" id="L47">            FlowableEngineEventType engineEventType = (FlowableEngineEventType) flowableEvent.getType();</span>

<span class="nc bnc" id="L49" title="All 4 branches missed.">            if (types == null || types.contains(engineEventType)) {</span>
<span class="nc bnc" id="L50" title="All 49 branches missed.">                switch (engineEventType) {</span>
                    case ENTITY_CREATED:
<span class="nc" id="L52">                        entityCreated((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L53">                        break;</span>
                    case ENTITY_INITIALIZED:
<span class="nc" id="L55">                        entityInitialized((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L56">                        break;</span>
                    case ENTITY_UPDATED:
<span class="nc" id="L58">                        entityUpdated((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L59">                        break;</span>
                    case ENTITY_DELETED:
<span class="nc" id="L61">                        entityDeleted((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L62">                        break;</span>
                    case ENTITY_SUSPENDED:
<span class="nc" id="L64">                        entitySuspended((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L65">                        break;</span>
                    case ENTITY_ACTIVATED:
<span class="nc" id="L67">                        entityActivated((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L68">                        break;</span>
                    case TIMER_SCHEDULED:
<span class="nc" id="L70">                        timerScheduled((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L71">                        break;</span>
                    case TIMER_FIRED:
<span class="nc" id="L73">                        timerFired((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L74">                        break;</span>
                    case JOB_CANCELED:
<span class="nc" id="L76">                        jobCancelled((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L77">                        break;</span>
                    case JOB_EXECUTION_SUCCESS:
<span class="nc" id="L79">                        jobExecutionSuccess((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L80">                        break;</span>
                    case JOB_EXECUTION_FAILURE:
<span class="nc" id="L82">                        jobExecutionFailure((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L83">                        break;</span>
                    case JOB_RETRIES_DECREMENTED:
<span class="nc" id="L85">                        jobRetriesDecremented((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L86">                        break;</span>
                    case JOB_RESCHEDULED:
<span class="nc" id="L88">                        jobRescheduled((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L89">                        break;</span>
                    case CUSTOM:
<span class="nc" id="L91">                        custom(flowableEngineEvent);</span>
<span class="nc" id="L92">                        break;</span>
                    case ENGINE_CREATED:
<span class="nc" id="L94">                        engineCreated((FlowableProcessEngineEvent) flowableEngineEvent);</span>
<span class="nc" id="L95">                        break;</span>
                    case ENGINE_CLOSED:
<span class="nc" id="L97">                        engineClosed((FlowableProcessEngineEvent) flowableEngineEvent);</span>
<span class="nc" id="L98">                        break;</span>
                    case ACTIVITY_STARTED:
<span class="nc" id="L100">                        activityStarted((FlowableActivityEvent) flowableEngineEvent);</span>
<span class="nc" id="L101">                        break;</span>
                    case ACTIVITY_COMPLETED:
<span class="nc" id="L103">                        activityCompleted((FlowableActivityEvent) flowableEngineEvent);</span>
<span class="nc" id="L104">                        break;</span>
                    case ACTIVITY_CANCELLED:
<span class="nc" id="L106">                        activityCancelled((FlowableActivityCancelledEvent) flowableEngineEvent);</span>
<span class="nc" id="L107">                        break;</span>
                    case MULTI_INSTANCE_ACTIVITY_STARTED:
<span class="nc" id="L109">                        multiInstanceActivityStarted((FlowableMultiInstanceActivityEvent) flowableEngineEvent);</span>
<span class="nc" id="L110">                        break;</span>
                    case MULTI_INSTANCE_ACTIVITY_COMPLETED:
<span class="nc" id="L112">                        multiInstanceActivityCompleted((FlowableMultiInstanceActivityCompletedEvent) flowableEngineEvent);</span>
<span class="nc" id="L113">                        break;</span>
                    case MULTI_INSTANCE_ACTIVITY_COMPLETED_WITH_CONDITION:
<span class="nc" id="L115">                        multiInstanceActivityCompletedWithCondition((FlowableMultiInstanceActivityCompletedEvent) flowableEngineEvent);</span>
<span class="nc" id="L116">                        break;</span>
                    case MULTI_INSTANCE_ACTIVITY_CANCELLED:
<span class="nc" id="L118">                        multiInstanceActivityCancelled((FlowableMultiInstanceActivityCancelledEvent) flowableEngineEvent);</span>
<span class="nc" id="L119">                        break;</span>
                    case ACTIVITY_SIGNAL_WAITING:
<span class="nc" id="L121">                        activitySignalWaiting((FlowableSignalEvent) flowableEngineEvent);</span>
<span class="nc" id="L122">                        break;</span>
                    case ACTIVITY_SIGNALED:
<span class="nc" id="L124">                        activitySignaled((FlowableSignalEvent) flowableEngineEvent);</span>
<span class="nc" id="L125">                        break;</span>
                    case ACTIVITY_COMPENSATE:
<span class="nc" id="L127">                        activityCompensate((FlowableActivityEvent) flowableEngineEvent);</span>
<span class="nc" id="L128">                        break;</span>
                    case ACTIVITY_MESSAGE_WAITING:
<span class="nc" id="L130">                        activityMessageWaiting((FlowableMessageEvent) flowableEngineEvent);</span>
<span class="nc" id="L131">                        break;</span>
                    case ACTIVITY_MESSAGE_RECEIVED:
<span class="nc" id="L133">                        activityMessageReceived((FlowableMessageEvent) flowableEngineEvent);</span>
<span class="nc" id="L134">                        break;</span>
                    case ACTIVITY_MESSAGE_CANCELLED:
<span class="nc" id="L136">                        activityMessageCancelled((FlowableMessageEvent) flowableEngineEvent);</span>
<span class="nc" id="L137">                        break;</span>
                    case ACTIVITY_ERROR_RECEIVED:
<span class="nc" id="L139">                        activityErrorReceived((FlowableErrorEvent) flowableEngineEvent);</span>
<span class="nc" id="L140">                        break;</span>
                    case HISTORIC_ACTIVITY_INSTANCE_CREATED:
<span class="nc" id="L142">                        historicActivityInstanceCreated((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L143">                        break;</span>
                    case HISTORIC_ACTIVITY_INSTANCE_ENDED:
<span class="nc" id="L145">                        historicActivityInstanceEnded((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L146">                        break;</span>
                    case SEQUENCEFLOW_TAKEN:
<span class="nc" id="L148">                        sequenceFlowTaken((FlowableSequenceFlowTakenEvent) flowableEngineEvent);</span>
<span class="nc" id="L149">                        break;</span>
                    case VARIABLE_CREATED:
<span class="nc" id="L151">                        variableCreated((FlowableVariableEvent) flowableEngineEvent);</span>
<span class="nc" id="L152">                        break;</span>
                    case VARIABLE_UPDATED:
<span class="nc" id="L154">                        variableUpdatedEvent((FlowableVariableEvent) flowableEngineEvent);</span>
<span class="nc" id="L155">                        break;</span>
                    case VARIABLE_DELETED:
<span class="nc" id="L157">                        variableDeletedEvent((FlowableVariableEvent) flowableEngineEvent);</span>
<span class="nc" id="L158">                        break;</span>
                    case TASK_CREATED:
<span class="nc" id="L160">                        taskCreated((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L161">                        break;</span>
                    case TASK_ASSIGNED:
<span class="nc" id="L163">                        taskAssigned((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L164">                        break;</span>
                    case TASK_COMPLETED:
<span class="nc" id="L166">                        taskCompleted((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L167">                        break;</span>
                    case PROCESS_CREATED:
<span class="nc" id="L169">                        processCreated((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L170">                        break;</span>
                    case PROCESS_STARTED:
<span class="nc" id="L172">                        processStarted((FlowableProcessStartedEvent) flowableEngineEvent);</span>
<span class="nc" id="L173">                        break;</span>
                    case PROCESS_COMPLETED:
<span class="nc" id="L175">                        processCompleted((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L176">                        break;</span>
                    case PROCESS_COMPLETED_WITH_TERMINATE_END_EVENT:
<span class="nc" id="L178">                        processCompletedWithTerminateEnd((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L179">                        break;</span>
                    case PROCESS_COMPLETED_WITH_ERROR_END_EVENT:
<span class="nc" id="L181">                        processCompletedWithErrorEnd((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L182">                        break;</span>
                    case PROCESS_COMPLETED_WITH_ESCALATION_END_EVENT:
<span class="nc" id="L184">                        processCompletedWithEscalationEnd((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L185">                        break;</span>
                    case PROCESS_CANCELLED:
<span class="nc" id="L187">                        processCancelled((FlowableCancelledEvent) flowableEngineEvent);</span>
<span class="nc" id="L188">                        break;</span>
                    case HISTORIC_PROCESS_INSTANCE_CREATED:
<span class="nc" id="L190">                        historicProcessInstanceCreated((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L191">                        break;</span>
                    case HISTORIC_PROCESS_INSTANCE_ENDED:
<span class="nc" id="L193">                        historicProcessInstanceEnded((FlowableEngineEntityEvent) flowableEngineEvent);</span>
<span class="nc" id="L194">                        break;</span>
                    default:
                        break;
                }
            }
        }
<span class="nc" id="L200">    }</span>

    @Override
    public boolean isFailOnException() {
<span class="nc" id="L204">        return true;</span>
    }

    @Override
    public Collection&lt;? extends FlowableEventType&gt; getTypes() {
<span class="nc bnc" id="L209" title="All 2 branches missed.">        return types == null ? super.getTypes() : types;</span>
    }

<span class="nc" id="L212">    protected void entityCreated(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L214">    protected void entityInitialized(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L216">    protected void entityUpdated(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L218">    protected void entityDeleted(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L220">    protected void entitySuspended(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L222">    protected void entityActivated(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L224">    protected void timerScheduled(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L226">    protected void timerFired(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L228">    protected void jobCancelled(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L230">    protected void jobExecutionSuccess(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L232">    protected void jobExecutionFailure(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L234">    protected void jobRetriesDecremented(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L236">    protected void jobRescheduled(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L238">    protected void custom(FlowableEngineEvent event) {}</span>

<span class="nc" id="L240">    protected void engineCreated(FlowableProcessEngineEvent event) {}</span>

<span class="nc" id="L242">    protected void engineClosed(FlowableProcessEngineEvent flowableEngineEvent) {}</span>

<span class="nc" id="L244">    protected void activityStarted(FlowableActivityEvent event) {}</span>

<span class="nc" id="L246">    protected void activityCompleted(FlowableActivityEvent event) {}</span>

<span class="nc" id="L248">    protected void activityCancelled(FlowableActivityCancelledEvent event) {}</span>

<span class="nc" id="L250">    protected void multiInstanceActivityStarted(FlowableMultiInstanceActivityEvent event) {}</span>

<span class="nc" id="L252">    protected void multiInstanceActivityCompleted(FlowableMultiInstanceActivityCompletedEvent event) {}</span>

<span class="nc" id="L254">    protected void multiInstanceActivityCompletedWithCondition(FlowableMultiInstanceActivityCompletedEvent event) {}</span>

<span class="nc" id="L256">    protected void multiInstanceActivityCancelled(FlowableMultiInstanceActivityCancelledEvent event) {}</span>

<span class="nc" id="L258">    protected void activitySignalWaiting(FlowableSignalEvent event) {}</span>

<span class="nc" id="L260">    protected void activitySignaled(FlowableSignalEvent event) {}</span>

<span class="nc" id="L262">    protected void activityCompensate(FlowableActivityEvent event) {}</span>

<span class="nc" id="L264">    protected void activityMessageWaiting(FlowableMessageEvent event) {}</span>

<span class="nc" id="L266">    protected void activityMessageReceived(FlowableMessageEvent event) {}</span>

<span class="nc" id="L268">    protected void activityMessageCancelled(FlowableMessageEvent event) {}</span>

<span class="nc" id="L270">    protected void activityErrorReceived(FlowableErrorEvent event) {}</span>

<span class="nc" id="L272">    protected void historicActivityInstanceCreated(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L274">    protected void historicActivityInstanceEnded(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L276">    protected void sequenceFlowTaken(FlowableSequenceFlowTakenEvent event) {}</span>

<span class="nc" id="L278">    protected void variableCreated(FlowableVariableEvent event) {}</span>

<span class="nc" id="L280">    protected void variableUpdatedEvent(FlowableVariableEvent event) {}</span>

<span class="nc" id="L282">    protected void variableDeletedEvent(FlowableVariableEvent event) {}</span>

<span class="nc" id="L284">    protected void taskCreated(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L286">    protected void taskAssigned(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L288">    protected void taskCompleted(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L290">    protected void processCreated(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L292">    protected void processStarted(FlowableProcessStartedEvent event) {}</span>

<span class="nc" id="L294">    protected void processCompleted(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L296">    protected void processCompletedWithTerminateEnd(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L298">    protected void processCompletedWithErrorEnd(FlowableEngineEntityEvent event) {}</span>
    
<span class="nc" id="L300">    protected void processCompletedWithEscalationEnd(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L302">    protected void processCancelled(FlowableCancelledEvent event) {}</span>

<span class="nc" id="L304">    protected void historicProcessInstanceCreated(FlowableEngineEntityEvent event) {}</span>

<span class="nc" id="L306">    protected void historicProcessInstanceEnded(FlowableEngineEntityEvent event) {}</span>

    protected DelegateExecution getExecution(FlowableEngineEvent event) {
<span class="nc" id="L309">        String executionId = event.getExecutionId();</span>

<span class="nc bnc" id="L311" title="All 2 branches missed.">        if (executionId != null) {</span>
<span class="nc" id="L312">            CommandContext commandContext = CommandContextUtil.getCommandContext();</span>
<span class="nc bnc" id="L313" title="All 2 branches missed.">            if (commandContext != null) {</span>
<span class="nc" id="L314">                return CommandContextUtil.getExecutionEntityManager(commandContext).findById(executionId);</span>
                }
            }
<span class="nc" id="L317">        return null;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>