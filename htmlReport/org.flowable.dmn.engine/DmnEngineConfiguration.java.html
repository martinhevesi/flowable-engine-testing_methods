<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DmnEngineConfiguration.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">jacoco.exec</a> &gt; <a href="index.source.html" class="el_package">org.flowable.dmn.engine</a> &gt; <span class="el_source">DmnEngineConfiguration.java</span></div><h1>DmnEngineConfiguration.java</h1><pre class="source lang-java linenums">/* Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.flowable.dmn.engine;

import java.io.InputStream;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.function.Consumer;

import javax.sql.DataSource;

import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.transaction.TransactionFactory;
import org.flowable.common.engine.api.delegate.FlowableFunctionDelegate;
import org.flowable.common.engine.api.scope.ScopeTypes;
import org.flowable.common.engine.impl.AbstractEngineConfiguration;
import org.flowable.common.engine.impl.HasExpressionManagerEngineConfiguration;
import org.flowable.common.engine.impl.cfg.BeansConfigurationHelper;
import org.flowable.common.engine.impl.db.DbSqlSessionFactory;
import org.flowable.common.engine.impl.el.DefaultExpressionManager;
import org.flowable.common.engine.impl.el.ExpressionManager;
import org.flowable.common.engine.impl.interceptor.CommandInterceptor;
import org.flowable.common.engine.impl.interceptor.EngineConfigurationConstants;
import org.flowable.common.engine.impl.interceptor.SessionFactory;
import org.flowable.common.engine.impl.javax.el.ELResolver;
import org.flowable.common.engine.impl.persistence.deploy.DefaultDeploymentCache;
import org.flowable.common.engine.impl.persistence.deploy.DeploymentCache;
import org.flowable.common.engine.impl.persistence.entity.TableDataManager;
import org.flowable.common.engine.impl.runtime.Clock;
import org.flowable.common.engine.impl.tenant.ChangeTenantIdManager;
import org.flowable.common.engine.impl.tenant.MyBatisChangeTenantIdManager;
import org.flowable.dmn.api.DmnChangeTenantIdEntityTypes;
import org.flowable.dmn.api.DmnDecisionService;
import org.flowable.dmn.api.DmnEngineConfigurationApi;
import org.flowable.dmn.api.DmnHistoryService;
import org.flowable.dmn.api.DmnManagementService;
import org.flowable.dmn.api.DmnRepositoryService;
import org.flowable.dmn.engine.impl.DmnDecisionServiceImpl;
import org.flowable.dmn.engine.impl.DmnEngineImpl;
import org.flowable.dmn.engine.impl.DmnHistoryServiceImpl;
import org.flowable.dmn.engine.impl.DmnManagementServiceImpl;
import org.flowable.dmn.engine.impl.DmnRepositoryServiceImpl;
import org.flowable.dmn.engine.impl.RuleEngineExecutorImpl;
import org.flowable.dmn.engine.impl.agenda.DefaultDmnEngineAgendaFactory;
import org.flowable.dmn.engine.impl.agenda.DmnEngineAgendaFactory;
import org.flowable.dmn.engine.impl.agenda.DmnEngineAgendaSessionFactory;
import org.flowable.dmn.engine.impl.cfg.StandaloneDmnEngineConfiguration;
import org.flowable.dmn.engine.impl.cfg.StandaloneInMemDmnEngineConfiguration;
import org.flowable.dmn.engine.impl.cmd.SchemaOperationsDmnEngineBuild;
import org.flowable.dmn.engine.impl.db.DmnDbSchemaManager;
import org.flowable.dmn.engine.impl.db.EntityDependencyOrder;
import org.flowable.dmn.engine.impl.deployer.CachingAndArtifactsManager;
import org.flowable.dmn.engine.impl.deployer.DecisionRequirementsDiagramHelper;
import org.flowable.dmn.engine.impl.deployer.DmnDeployer;
import org.flowable.dmn.engine.impl.deployer.DmnDeploymentHelper;
import org.flowable.dmn.engine.impl.deployer.ParsedDeploymentBuilderFactory;
import org.flowable.dmn.engine.impl.el.FlowableAddDateFunctionDelegate;
import org.flowable.dmn.engine.impl.el.FlowableAllOfFunctionDelegate;
import org.flowable.dmn.engine.impl.el.FlowableAnyOfFunctionDelegate;
import org.flowable.dmn.engine.impl.el.FlowableContainsAnyFunctionDelegate;
import org.flowable.dmn.engine.impl.el.FlowableContainsFunctionDelegate;
import org.flowable.dmn.engine.impl.el.FlowableCurrentDateFunctionDelegate;
import org.flowable.dmn.engine.impl.el.FlowableNoneOfFunctionDelegate;
import org.flowable.dmn.engine.impl.el.FlowableNotAllOfFunctionDelegate;
import org.flowable.dmn.engine.impl.el.FlowableNotContainsAnyFunctionDelegate;
import org.flowable.dmn.engine.impl.el.FlowableNotContainsFunctionDelegate;
import org.flowable.dmn.engine.impl.el.FlowableSubtractDateFunctionDelegate;
import org.flowable.dmn.engine.impl.el.FlowableToDateFunctionDelegate;
import org.flowable.dmn.engine.impl.hitpolicy.AbstractHitPolicy;
import org.flowable.dmn.engine.impl.hitpolicy.HitPolicyAny;
import org.flowable.dmn.engine.impl.hitpolicy.HitPolicyCollect;
import org.flowable.dmn.engine.impl.hitpolicy.HitPolicyFirst;
import org.flowable.dmn.engine.impl.hitpolicy.HitPolicyOutputOrder;
import org.flowable.dmn.engine.impl.hitpolicy.HitPolicyPriority;
import org.flowable.dmn.engine.impl.hitpolicy.HitPolicyRuleOrder;
import org.flowable.dmn.engine.impl.hitpolicy.HitPolicyUnique;
import org.flowable.dmn.engine.impl.interceptor.DmnCommandInvoker;
import org.flowable.dmn.engine.impl.parser.DmnParseFactory;
import org.flowable.dmn.engine.impl.persistence.deploy.DecisionCacheEntry;
import org.flowable.dmn.engine.impl.persistence.deploy.Deployer;
import org.flowable.dmn.engine.impl.persistence.deploy.DeploymentManager;
import org.flowable.dmn.engine.impl.persistence.entity.DecisionEntityManager;
import org.flowable.dmn.engine.impl.persistence.entity.DefinitionEntityManagerImpl;
import org.flowable.dmn.engine.impl.persistence.entity.DmnDeploymentEntityManager;
import org.flowable.dmn.engine.impl.persistence.entity.DmnDeploymentEntityManagerImpl;
import org.flowable.dmn.engine.impl.persistence.entity.DmnResourceEntityManager;
import org.flowable.dmn.engine.impl.persistence.entity.DmnResourceEntityManagerImpl;
import org.flowable.dmn.engine.impl.persistence.entity.HistoricDecisionExecutionEntityManager;
import org.flowable.dmn.engine.impl.persistence.entity.HistoricDecisionExecutionEntityManagerImpl;
import org.flowable.dmn.engine.impl.persistence.entity.data.DecisionDataManager;
import org.flowable.dmn.engine.impl.persistence.entity.data.DmnDeploymentDataManager;
import org.flowable.dmn.engine.impl.persistence.entity.data.DmnResourceDataManager;
import org.flowable.dmn.engine.impl.persistence.entity.data.HistoricDecisionExecutionDataManager;
import org.flowable.dmn.engine.impl.persistence.entity.data.impl.MybatisDecisionDataManager;
import org.flowable.dmn.engine.impl.persistence.entity.data.impl.MybatisDmnDeploymentDataManager;
import org.flowable.dmn.engine.impl.persistence.entity.data.impl.MybatisDmnResourceDataManager;
import org.flowable.dmn.engine.impl.persistence.entity.data.impl.MybatisHistoricDecisionExecutionDataManager;
import org.flowable.dmn.image.DecisionRequirementsDiagramGenerator;
import org.flowable.dmn.image.impl.DefaultDecisionRequirementsDiagramGenerator;

<span class="nc" id="L116">public class DmnEngineConfiguration extends AbstractEngineConfiguration</span>
        implements DmnEngineConfigurationApi, HasExpressionManagerEngineConfiguration {

    public static final String DEFAULT_MYBATIS_MAPPING_FILE = &quot;org/flowable/dmn/db/mapping/mappings.xml&quot;;

    public static final String LIQUIBASE_CHANGELOG_PREFIX = &quot;ACT_DMN_&quot;;

<span class="nc" id="L123">    protected String dmnEngineName = DmnEngines.NAME_DEFAULT;</span>

    protected DmnEngineAgendaFactory dmnEngineAgendaFactory;

    // SERVICES
    // /////////////////////////////////////////////////////////////////

<span class="nc" id="L130">    protected DmnManagementService dmnManagementService = new DmnManagementServiceImpl(this);</span>
<span class="nc" id="L131">    protected DmnRepositoryService dmnRepositoryService = new DmnRepositoryServiceImpl();</span>
<span class="nc" id="L132">    protected DmnDecisionService ruleService = new DmnDecisionServiceImpl(this);</span>
<span class="nc" id="L133">    protected DmnHistoryService dmnHistoryService = new DmnHistoryServiceImpl();</span>
    protected RuleEngineExecutor ruleEngineExecutor;

    // DATA MANAGERS ///////////////////////////////////////////////////

    protected DmnDeploymentDataManager deploymentDataManager;
    protected DecisionDataManager decisionDataManager;
    protected DmnResourceDataManager resourceDataManager;
    protected HistoricDecisionExecutionDataManager historicDecisionExecutionDataManager;

    // ENTITY MANAGERS /////////////////////////////////////////////////
    protected DmnDeploymentEntityManager deploymentEntityManager;
    protected DecisionEntityManager decisionEntityManager;
    protected DmnResourceEntityManager resourceEntityManager;
    protected HistoricDecisionExecutionEntityManager historicDecisionExecutionEntityManager;

    protected ChangeTenantIdManager changeTenantIdManager;

    // EXPRESSION MANAGER /////////////////////////////////////////////
    protected ExpressionManager expressionManager;
    protected Collection&lt;Consumer&lt;ExpressionManager&gt;&gt; expressionManagerConfigurers;
    protected List&lt;FlowableFunctionDelegate&gt; flowableFunctionDelegates;
    protected List&lt;FlowableFunctionDelegate&gt; customFlowableFunctionDelegates;
    protected Collection&lt;ELResolver&gt; preDefaultELResolvers;
    protected Collection&lt;ELResolver&gt; preBeanELResolvers;
    protected Collection&lt;ELResolver&gt; postDefaultELResolvers;

    // DEPLOYERS
    // ////////////////////////////////////////////////////////////////

    protected DmnDeployer dmnDeployer;
    protected DmnParseFactory dmnParseFactory;
    protected ParsedDeploymentBuilderFactory parsedDeploymentBuilderFactory;
    protected DmnDeploymentHelper dmnDeploymentHelper;
    protected CachingAndArtifactsManager cachingAndArtifactsManager;
    protected List&lt;Deployer&gt; customPreDeployers;
    protected List&lt;Deployer&gt; customPostDeployers;
    protected List&lt;Deployer&gt; deployers;
    protected DeploymentManager deploymentManager;
    protected DecisionRequirementsDiagramHelper decisionRequirementsDiagramHelper;

    /**
     * Decision requirements diagram generator. Default value is DefaultDecisionRequirementsDiagramGenerator
     */
    protected DecisionRequirementsDiagramGenerator decisionRequirementsDiagramGenerator;

<span class="nc" id="L179">    protected boolean isCreateDiagramOnDeploy = true;</span>

<span class="nc" id="L181">    protected String decisionFontName = &quot;Arial&quot;;</span>
<span class="nc" id="L182">    protected String labelFontName = &quot;Arial&quot;;</span>
<span class="nc" id="L183">    protected String annotationFontName = &quot;Arial&quot;;</span>

    protected boolean historyEnabled;

<span class="nc" id="L187">    protected int decisionCacheLimit = -1; // By default, no limit</span>
    protected DeploymentCache&lt;DecisionCacheEntry&gt; definitionCache;

    // HIT POLICIES
    protected Map&lt;String, AbstractHitPolicy&gt; hitPolicyBehaviors;
    protected Map&lt;String, AbstractHitPolicy&gt; customHitPolicyBehaviors;


    /**
     * Set this to true if you want to have extra checks on the DMN xml that is parsed. See http://www.jorambarrez.be/blog/2013/02/19/uploading-a-funny-xml -can-bring-down-your-server/
     *
     * Unfortunately, this feature is not available on some platforms (JDK 6, JBoss), hence the reason why it is disabled by default. If your platform allows the use of StaxSource during XML parsing,
     * do enable it.
     */
    protected boolean enableSafeDmnXml;


    /**
     * Set this to false if you want to ignore the decision table hit policy validity checks to result in an failed decision table state.
     *
     * A result is that intermediate results created up to the point the validation error occurs are returned.
     */
<span class="nc" id="L209">    protected boolean strictMode = true;</span>

    public static DmnEngineConfiguration createDmnEngineConfigurationFromResourceDefault() {
<span class="nc" id="L212">        return createDmnEngineConfigurationFromResource(&quot;flowable.dmn.cfg.xml&quot;, &quot;dmnEngineConfiguration&quot;);</span>
    }

    public static DmnEngineConfiguration createDmnEngineConfigurationFromResource(String resource) {
<span class="nc" id="L216">        return createDmnEngineConfigurationFromResource(resource, &quot;dmnEngineConfiguration&quot;);</span>
    }

    public static DmnEngineConfiguration createDmnEngineConfigurationFromResource(String resource, String beanName) {
<span class="nc" id="L220">        return (DmnEngineConfiguration) BeansConfigurationHelper.parseEngineConfigurationFromResource(resource, beanName);</span>
    }

    public static DmnEngineConfiguration createDmnEngineConfigurationFromInputStream(InputStream inputStream) {
<span class="nc" id="L224">        return createDmnEngineConfigurationFromInputStream(inputStream, &quot;dmnEngineConfiguration&quot;);</span>
    }

    public static DmnEngineConfiguration createDmnEngineConfigurationFromInputStream(InputStream inputStream, String beanName) {
<span class="nc" id="L228">        return (DmnEngineConfiguration) BeansConfigurationHelper.parseEngineConfigurationFromInputStream(inputStream, beanName);</span>
    }

    public static DmnEngineConfiguration createStandaloneDmnEngineConfiguration() {
<span class="nc" id="L232">        return new StandaloneDmnEngineConfiguration();</span>
    }

    public static DmnEngineConfiguration createStandaloneInMemDmnEngineConfiguration() {
<span class="nc" id="L236">        return new StandaloneInMemDmnEngineConfiguration();</span>
    }

    // buildDmnEngine
    // ///////////////////////////////////////////////////////

    public DmnEngine buildDmnEngine() {
<span class="nc" id="L243">        init();</span>
<span class="nc" id="L244">        return new DmnEngineImpl(this);</span>
    }

    // init
    // /////////////////////////////////////////////////////////////////////

    protected void init() {
<span class="nc" id="L251">        initEngineConfigurations();</span>
<span class="nc" id="L252">        initClock();</span>
<span class="nc" id="L253">        initObjectMapper();</span>
<span class="nc" id="L254">        initFunctionDelegates();</span>
<span class="nc" id="L255">        initBeans();</span>
<span class="nc" id="L256">        initExpressionManager();</span>
<span class="nc" id="L257">        initCommandContextFactory();</span>
<span class="nc" id="L258">        initTransactionContextFactory();</span>
<span class="nc" id="L259">        initCommandExecutors();</span>
<span class="nc" id="L260">        initIdGenerator();</span>
<span class="nc" id="L261">        initDmnEngineAgendaFactory();</span>

<span class="nc bnc" id="L263" title="All 2 branches missed.">        if (usingRelationalDatabase) {</span>
<span class="nc" id="L264">            initDataSource();</span>
        }
        
<span class="nc bnc" id="L267" title="All 4 branches missed.">        if (usingRelationalDatabase || usingSchemaMgmt) {</span>
<span class="nc" id="L268">            initSchemaManager();</span>
<span class="nc" id="L269">            initSchemaManagementCommand();</span>
        }

<span class="nc" id="L272">        initTransactionFactory();</span>

<span class="nc bnc" id="L274" title="All 2 branches missed.">        if (usingRelationalDatabase) {</span>
<span class="nc" id="L275">            initSqlSessionFactory();</span>
        }

<span class="nc" id="L278">        initSessionFactories();</span>
<span class="nc" id="L279">        initServices();</span>
<span class="nc" id="L280">        initChangeTenantIdManager();</span>
<span class="nc" id="L281">        initDataManagers();</span>
<span class="nc" id="L282">        initEntityManagers();</span>
<span class="nc" id="L283">        initDeployers();</span>
<span class="nc" id="L284">        initHitPolicyBehaviors();</span>
<span class="nc" id="L285">        initRuleEngineExecutor();</span>
<span class="nc" id="L286">        initDecisionRequirementsDiagramGenerator();</span>
<span class="nc" id="L287">    }</span>

    // services
    // /////////////////////////////////////////////////////////////////

    protected void initServices() {
<span class="nc" id="L293">        initService(dmnManagementService);</span>
<span class="nc" id="L294">        initService(dmnRepositoryService);</span>
<span class="nc" id="L295">        initService(ruleService);</span>
<span class="nc" id="L296">        initService(dmnHistoryService);</span>
<span class="nc" id="L297">    }</span>

    // Data managers
    ///////////////////////////////////////////////////////////

    @Override
    public void initDataManagers() {
<span class="nc" id="L304">        super.initDataManagers();</span>
<span class="nc bnc" id="L305" title="All 2 branches missed.">        if (deploymentDataManager == null) {</span>
<span class="nc" id="L306">            deploymentDataManager = new MybatisDmnDeploymentDataManager(this);</span>
        }
<span class="nc bnc" id="L308" title="All 2 branches missed.">        if (decisionDataManager == null) {</span>
<span class="nc" id="L309">            decisionDataManager = new MybatisDecisionDataManager(this);</span>
        }
<span class="nc bnc" id="L311" title="All 2 branches missed.">        if (resourceDataManager == null) {</span>
<span class="nc" id="L312">            resourceDataManager = new MybatisDmnResourceDataManager(this);</span>
        }
<span class="nc bnc" id="L314" title="All 2 branches missed.">        if (historicDecisionExecutionDataManager == null) {</span>
<span class="nc" id="L315">            historicDecisionExecutionDataManager = new MybatisHistoricDecisionExecutionDataManager(this);</span>
        }
<span class="nc" id="L317">    }</span>

    @Override
    public void initEntityManagers() {
<span class="nc" id="L321">        super.initEntityManagers();</span>
<span class="nc bnc" id="L322" title="All 2 branches missed.">        if (deploymentEntityManager == null) {</span>
<span class="nc" id="L323">            deploymentEntityManager = new DmnDeploymentEntityManagerImpl(this, deploymentDataManager);</span>
        }
<span class="nc bnc" id="L325" title="All 2 branches missed.">        if (decisionEntityManager == null) {</span>
<span class="nc" id="L326">            decisionEntityManager = new DefinitionEntityManagerImpl(this, decisionDataManager);</span>
        }
<span class="nc bnc" id="L328" title="All 2 branches missed.">        if (resourceEntityManager == null) {</span>
<span class="nc" id="L329">            resourceEntityManager = new DmnResourceEntityManagerImpl(this, resourceDataManager);</span>
        }
<span class="nc bnc" id="L331" title="All 2 branches missed.">        if (historicDecisionExecutionEntityManager == null) {</span>
<span class="nc" id="L332">            historicDecisionExecutionEntityManager = new HistoricDecisionExecutionEntityManagerImpl(this, historicDecisionExecutionDataManager);</span>
        }
<span class="nc" id="L334">    }</span>

    // data model
    // ///////////////////////////////////////////////////////////////

    @Override
    public void initSchemaManager() {
<span class="nc" id="L341">        super.initSchemaManager();</span>
<span class="nc bnc" id="L342" title="All 2 branches missed.">        if (this.schemaManager == null) {</span>
<span class="nc" id="L343">            this.schemaManager = new DmnDbSchemaManager();</span>
        }
<span class="nc" id="L345">    }</span>

    public void initSchemaManagementCommand() {
<span class="nc bnc" id="L348" title="All 2 branches missed.">        if (schemaManagementCmd == null) {</span>
<span class="nc bnc" id="L349" title="All 4 branches missed.">            if (usingRelationalDatabase &amp;&amp; databaseSchemaUpdate != null) {</span>
<span class="nc" id="L350">                this.schemaManagementCmd = new SchemaOperationsDmnEngineBuild();</span>
            }
        }
<span class="nc" id="L353">    }</span>

    // session factories ////////////////////////////////////////////////////////

    @Override
    public void initDbSqlSessionFactory() {
<span class="nc bnc" id="L359" title="All 2 branches missed.">        if (dbSqlSessionFactory == null) {</span>
<span class="nc" id="L360">            dbSqlSessionFactory = createDbSqlSessionFactory();</span>
<span class="nc" id="L361">            dbSqlSessionFactory.setDatabaseType(databaseType);</span>
<span class="nc" id="L362">            dbSqlSessionFactory.setSqlSessionFactory(sqlSessionFactory);</span>
<span class="nc" id="L363">            dbSqlSessionFactory.setDatabaseTablePrefix(databaseTablePrefix);</span>
<span class="nc" id="L364">            dbSqlSessionFactory.setTablePrefixIsSchema(tablePrefixIsSchema);</span>
<span class="nc" id="L365">            dbSqlSessionFactory.setDatabaseCatalog(databaseCatalog);</span>
<span class="nc" id="L366">            dbSqlSessionFactory.setDatabaseSchema(databaseSchema);</span>
<span class="nc" id="L367">            addSessionFactory(dbSqlSessionFactory);</span>
        }
<span class="nc" id="L369">        initDbSqlSessionFactoryEntitySettings();</span>
<span class="nc" id="L370">    }</span>

    @Override
    public DbSqlSessionFactory createDbSqlSessionFactory() {
<span class="nc" id="L374">        return new DbSqlSessionFactory(usePrefixId);</span>
    }

    @Override
    protected void initDbSqlSessionFactoryEntitySettings() {
<span class="nc" id="L379">        defaultInitDbSqlSessionFactoryEntitySettings(EntityDependencyOrder.INSERT_ORDER, EntityDependencyOrder.DELETE_ORDER);</span>
<span class="nc" id="L380">    }</span>

    // command executors
    // ////////////////////////////////////////////////////////

    @Override
    public void initCommandExecutors() {
<span class="nc" id="L387">        initDefaultCommandConfig();</span>
<span class="nc" id="L388">        initSchemaCommandConfig();</span>
<span class="nc" id="L389">        initCommandInvoker();</span>
<span class="nc" id="L390">        initCommandInterceptors();</span>
<span class="nc" id="L391">        initCommandExecutor();</span>
<span class="nc" id="L392">    }</span>

    @Override
    public String getEngineCfgKey() {
<span class="nc" id="L396">        return EngineConfigurationConstants.KEY_DMN_ENGINE_CONFIG;</span>
    }
    
    @Override
    public String getEngineScopeType() {
<span class="nc" id="L401">        return ScopeTypes.DMN;</span>
    }

    @Override
    public CommandInterceptor createTransactionInterceptor() {
<span class="nc" id="L406">        return null;</span>
    }

    public void initFunctionDelegates() {
<span class="nc bnc" id="L410" title="All 2 branches missed.">        if (this.flowableFunctionDelegates == null) {</span>
<span class="nc" id="L411">            this.flowableFunctionDelegates = new ArrayList&lt;&gt;();</span>
            // dates
<span class="nc" id="L413">            this.flowableFunctionDelegates.add(new FlowableToDateFunctionDelegate());</span>
<span class="nc" id="L414">            this.flowableFunctionDelegates.add(new FlowableSubtractDateFunctionDelegate());</span>
<span class="nc" id="L415">            this.flowableFunctionDelegates.add(new FlowableAddDateFunctionDelegate());</span>
<span class="nc" id="L416">            this.flowableFunctionDelegates.add(new FlowableCurrentDateFunctionDelegate());</span>
            // collections
<span class="nc" id="L418">            this.flowableFunctionDelegates.add(new FlowableAllOfFunctionDelegate());</span>
<span class="nc" id="L419">            this.flowableFunctionDelegates.add(new FlowableNoneOfFunctionDelegate());</span>
<span class="nc" id="L420">            this.flowableFunctionDelegates.add(new FlowableAnyOfFunctionDelegate());</span>
<span class="nc" id="L421">            this.flowableFunctionDelegates.add(new FlowableNotAllOfFunctionDelegate());</span>
            // deprecated collections
<span class="nc" id="L423">            this.flowableFunctionDelegates.add(new FlowableContainsFunctionDelegate());</span>
<span class="nc" id="L424">            this.flowableFunctionDelegates.add(new FlowableNotContainsFunctionDelegate());</span>
<span class="nc" id="L425">            this.flowableFunctionDelegates.add(new FlowableContainsAnyFunctionDelegate());</span>
<span class="nc" id="L426">            this.flowableFunctionDelegates.add(new FlowableNotContainsAnyFunctionDelegate());</span>
        }

<span class="nc bnc" id="L429" title="All 2 branches missed.">        if (this.customFlowableFunctionDelegates != null) {</span>
<span class="nc" id="L430">            this.flowableFunctionDelegates.addAll(this.customFlowableFunctionDelegates);</span>
        }
<span class="nc" id="L432">    }</span>

    public void initChangeTenantIdManager() {
<span class="nc bnc" id="L435" title="All 2 branches missed.">        if (changeTenantIdManager == null) {</span>
<span class="nc" id="L436">            changeTenantIdManager = new MyBatisChangeTenantIdManager(commandExecutor, ScopeTypes.DMN,</span>
<span class="nc" id="L437">                    Collections.singleton(DmnChangeTenantIdEntityTypes.HISTORIC_DECISION_EXECUTIONS));</span>
        }
<span class="nc" id="L439">    }</span>

    public void initExpressionManager() {
<span class="nc bnc" id="L442" title="All 2 branches missed.">        if (expressionManager == null) {</span>
<span class="nc" id="L443">            DefaultExpressionManager dmnExpressionManager = new DefaultExpressionManager(beans);</span>
<span class="nc bnc" id="L444" title="All 2 branches missed.">            if (preDefaultELResolvers != null) {</span>
<span class="nc" id="L445">                preDefaultELResolvers.forEach(dmnExpressionManager::addPreDefaultResolver);</span>
            }

<span class="nc bnc" id="L448" title="All 2 branches missed.">            if (preBeanELResolvers != null) {</span>
<span class="nc" id="L449">                preBeanELResolvers.forEach(dmnExpressionManager::addPreBeanResolver);</span>
            }

<span class="nc bnc" id="L452" title="All 2 branches missed.">            if (postDefaultELResolvers != null) {</span>
<span class="nc" id="L453">                postDefaultELResolvers.forEach(dmnExpressionManager::addPostDefaultResolver);</span>
            }

<span class="nc bnc" id="L456" title="All 2 branches missed.">            if (expressionManagerConfigurers != null) {</span>
<span class="nc" id="L457">                expressionManagerConfigurers.forEach(configurer -&gt; configurer.accept(dmnExpressionManager));</span>
            }

<span class="nc" id="L460">            expressionManager = dmnExpressionManager;</span>
        }

<span class="nc" id="L463">        expressionManager.setFunctionDelegates(flowableFunctionDelegates);</span>
<span class="nc" id="L464">    }</span>

    @Override
    public void initCommandInvoker() {
<span class="nc bnc" id="L468" title="All 2 branches missed.">        if (commandInvoker == null) {</span>
<span class="nc" id="L469">            commandInvoker = new DmnCommandInvoker(agendaOperationExecutionListeners);</span>
        }
<span class="nc" id="L471">    }</span>
    public void initDmnEngineAgendaFactory() {
<span class="nc bnc" id="L473" title="All 2 branches missed.">        if (dmnEngineAgendaFactory == null) {</span>
<span class="nc" id="L474">            dmnEngineAgendaFactory = new DefaultDmnEngineAgendaFactory();</span>
        }
<span class="nc" id="L476">    }</span>

    @Override
    public void initSessionFactories() {
<span class="nc" id="L480">        super.initSessionFactories();</span>
<span class="nc" id="L481">        addSessionFactory(new DmnEngineAgendaSessionFactory(dmnEngineAgendaFactory));</span>
<span class="nc" id="L482">    }</span>

    // deployers
    // ////////////////////////////////////////////////////////////////

    protected void initDeployers() {
<span class="nc bnc" id="L488" title="All 2 branches missed.">        if (dmnParseFactory == null) {</span>
<span class="nc" id="L489">            dmnParseFactory = new DmnParseFactory();</span>
        }

<span class="nc bnc" id="L492" title="All 2 branches missed.">        if (this.dmnDeployer == null) {</span>
<span class="nc" id="L493">            this.deployers = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L494" title="All 2 branches missed.">            if (customPreDeployers != null) {</span>
<span class="nc" id="L495">                this.deployers.addAll(customPreDeployers);</span>
            }
<span class="nc" id="L497">            this.deployers.addAll(getDefaultDeployers());</span>
<span class="nc bnc" id="L498" title="All 2 branches missed.">            if (customPostDeployers != null) {</span>
<span class="nc" id="L499">                this.deployers.addAll(customPostDeployers);</span>
            }
        }

        // Decision cache
<span class="nc bnc" id="L504" title="All 2 branches missed.">        if (definitionCache == null) {</span>
<span class="nc bnc" id="L505" title="All 2 branches missed.">            if (decisionCacheLimit &lt;= 0) {</span>
<span class="nc" id="L506">                definitionCache = new DefaultDeploymentCache&lt;&gt;();</span>
            } else {
<span class="nc" id="L508">                definitionCache = new DefaultDeploymentCache&lt;&gt;(decisionCacheLimit);</span>
            }
        }

<span class="nc" id="L512">        deploymentManager = new DeploymentManager(definitionCache, this);</span>
<span class="nc" id="L513">        deploymentManager.setDeployers(deployers);</span>
<span class="nc" id="L514">        deploymentManager.setDeploymentEntityManager(deploymentEntityManager);</span>
<span class="nc" id="L515">        deploymentManager.setDecisionEntityManager(decisionEntityManager);</span>
<span class="nc" id="L516">    }</span>

    public Collection&lt;? extends Deployer&gt; getDefaultDeployers() {
<span class="nc" id="L519">        List&lt;Deployer&gt; defaultDeployers = new ArrayList&lt;&gt;();</span>

<span class="nc bnc" id="L521" title="All 2 branches missed.">        if (dmnDeployer == null) {</span>
<span class="nc" id="L522">            dmnDeployer = new DmnDeployer();</span>
        }

<span class="nc" id="L525">        initDmnDeployerDependencies();</span>

<span class="nc" id="L527">        dmnDeployer.setIdGenerator(idGenerator);</span>
<span class="nc" id="L528">        dmnDeployer.setParsedDeploymentBuilderFactory(parsedDeploymentBuilderFactory);</span>
<span class="nc" id="L529">        dmnDeployer.setDmnDeploymentHelper(dmnDeploymentHelper);</span>
<span class="nc" id="L530">        dmnDeployer.setCachingAndArtifactsManager(cachingAndArtifactsManager);</span>
<span class="nc" id="L531">        dmnDeployer.setUsePrefixId(usePrefixId);</span>
<span class="nc" id="L532">        dmnDeployer.setDecisionRequirementsDiagramHelper(decisionRequirementsDiagramHelper);</span>

<span class="nc" id="L534">        defaultDeployers.add(dmnDeployer);</span>
<span class="nc" id="L535">        return defaultDeployers;</span>
    }

    public void initDmnDeployerDependencies() {
<span class="nc bnc" id="L539" title="All 2 branches missed.">        if (parsedDeploymentBuilderFactory == null) {</span>
<span class="nc" id="L540">            parsedDeploymentBuilderFactory = new ParsedDeploymentBuilderFactory();</span>
        }
<span class="nc bnc" id="L542" title="All 2 branches missed.">        if (parsedDeploymentBuilderFactory.getDmnParseFactory() == null) {</span>
<span class="nc" id="L543">            parsedDeploymentBuilderFactory.setDmnParseFactory(dmnParseFactory);</span>
        }

<span class="nc bnc" id="L546" title="All 2 branches missed.">        if (dmnDeploymentHelper == null) {</span>
<span class="nc" id="L547">            dmnDeploymentHelper = new DmnDeploymentHelper();</span>
        }

<span class="nc bnc" id="L550" title="All 2 branches missed.">        if (cachingAndArtifactsManager == null) {</span>
<span class="nc" id="L551">            cachingAndArtifactsManager = new CachingAndArtifactsManager();</span>
        }

<span class="nc bnc" id="L554" title="All 2 branches missed.">        if (decisionRequirementsDiagramHelper == null) {</span>
<span class="nc" id="L555">            decisionRequirementsDiagramHelper = new DecisionRequirementsDiagramHelper();</span>
        }
<span class="nc" id="L557">    }</span>

    // myBatis SqlSessionFactory
    // ////////////////////////////////////////////////

    @Override
    public InputStream getMyBatisXmlConfigurationStream() {
<span class="nc" id="L564">        return getResourceAsStream(DEFAULT_MYBATIS_MAPPING_FILE);</span>
    }


    // hit policy behaviors
    /////////////////////////////////////////////////////////
    public void initHitPolicyBehaviors() {
<span class="nc bnc" id="L571" title="All 2 branches missed.">        if (hitPolicyBehaviors == null) {</span>
<span class="nc" id="L572">            hitPolicyBehaviors = getDefaultHitPolicyBehaviors();</span>
        }

<span class="nc bnc" id="L575" title="All 2 branches missed.">        if (customHitPolicyBehaviors != null) {</span>
<span class="nc" id="L576">            hitPolicyBehaviors.putAll(customHitPolicyBehaviors);</span>
        }
<span class="nc" id="L578">    }</span>

    public Map&lt;String, AbstractHitPolicy&gt; getDefaultHitPolicyBehaviors() {
<span class="nc" id="L581">        Map&lt;String, AbstractHitPolicy&gt; defaultHitPolicyBehaviors = new HashMap&lt;&gt;();</span>

        // UNIQUE
<span class="nc" id="L584">        AbstractHitPolicy hitPolicyUniqueBehavior = new HitPolicyUnique();</span>
<span class="nc" id="L585">        defaultHitPolicyBehaviors.put(hitPolicyUniqueBehavior.getHitPolicyName(), hitPolicyUniqueBehavior);</span>

        // ANY
<span class="nc" id="L588">        AbstractHitPolicy hitPolicyAnyBehavior = new HitPolicyAny();</span>
<span class="nc" id="L589">        defaultHitPolicyBehaviors.put(hitPolicyAnyBehavior.getHitPolicyName(), hitPolicyAnyBehavior);</span>

        // FIRST
<span class="nc" id="L592">        AbstractHitPolicy hitPolicyFirstBehavior = new HitPolicyFirst();</span>
<span class="nc" id="L593">        defaultHitPolicyBehaviors.put(hitPolicyFirstBehavior.getHitPolicyName(), hitPolicyFirstBehavior);</span>

        // RULE ORDER
<span class="nc" id="L596">        AbstractHitPolicy HitPolicyRuleOrderBehavior = new HitPolicyRuleOrder();</span>
<span class="nc" id="L597">        defaultHitPolicyBehaviors.put(HitPolicyRuleOrderBehavior.getHitPolicyName(), HitPolicyRuleOrderBehavior);</span>

        // PRIORITY
<span class="nc" id="L600">        AbstractHitPolicy HitPolicyPriorityBehavior = new HitPolicyPriority();</span>
<span class="nc" id="L601">        defaultHitPolicyBehaviors.put(HitPolicyPriorityBehavior.getHitPolicyName(), HitPolicyPriorityBehavior);</span>

        // OUTPUT ORDER
<span class="nc" id="L604">        AbstractHitPolicy HitPolicyOutputOrderBehavior = new HitPolicyOutputOrder();</span>
<span class="nc" id="L605">        defaultHitPolicyBehaviors.put(HitPolicyOutputOrderBehavior.getHitPolicyName(), HitPolicyOutputOrderBehavior);</span>

        // COLLECT
<span class="nc" id="L608">        AbstractHitPolicy HitPolicyCollectBehavior = new HitPolicyCollect();</span>
<span class="nc" id="L609">        defaultHitPolicyBehaviors.put(HitPolicyCollectBehavior.getHitPolicyName(), HitPolicyCollectBehavior);</span>

<span class="nc" id="L611">        return defaultHitPolicyBehaviors;</span>
    }

    // rule engine executor
    /////////////////////////////////////////////////////////////
    public void initRuleEngineExecutor() {
<span class="nc bnc" id="L617" title="All 2 branches missed.">    	if (ruleEngineExecutor == null) {</span>
<span class="nc" id="L618">	        ruleEngineExecutor = new RuleEngineExecutorImpl(hitPolicyBehaviors, expressionManager, objectMapper, this);</span>
	        
    	} else {
<span class="nc bnc" id="L621" title="All 2 branches missed.">    	    if (ruleEngineExecutor.getExpressionManager() == null) {</span>
<span class="nc" id="L622">    	        ruleEngineExecutor.setExpressionManager(expressionManager);</span>
    	    }
    	    
<span class="nc bnc" id="L625" title="All 2 branches missed.">    	    if (ruleEngineExecutor.getHitPolicyBehaviors() == null) {</span>
<span class="nc" id="L626">    	        ruleEngineExecutor.setHitPolicyBehaviors(hitPolicyBehaviors);</span>
    	    }
    	    
<span class="nc bnc" id="L629" title="All 2 branches missed.">    	    if (ruleEngineExecutor.getObjectMapper() == null) {</span>
<span class="nc" id="L630">    	        ruleEngineExecutor.setObjectMapper(objectMapper);</span>
    	    }
    	}
<span class="nc" id="L633">    }</span>
    // decision requirements diagram
    /////////////////////////////////////////////////////////////
    public void initDecisionRequirementsDiagramGenerator() {
<span class="nc bnc" id="L637" title="All 2 branches missed.">        if (decisionRequirementsDiagramGenerator == null) {</span>
<span class="nc" id="L638">            decisionRequirementsDiagramGenerator = new DefaultDecisionRequirementsDiagramGenerator();</span>
        }
<span class="nc" id="L640">    }</span>

    public void initDecisionRequirementsDiagramHelper() {
<span class="nc bnc" id="L643" title="All 2 branches missed.">        if (decisionRequirementsDiagramHelper == null) {</span>
<span class="nc" id="L644">            decisionRequirementsDiagramHelper = new DecisionRequirementsDiagramHelper();</span>
        }
<span class="nc" id="L646">    }</span>

    // getters and setters
    // //////////////////////////////////////////////////////

    @Override
    public String getEngineName() {
<span class="nc" id="L653">        return dmnEngineName;</span>
    }

    public DmnEngineConfiguration setEngineName(String dmnEngineName) {
<span class="nc" id="L657">        this.dmnEngineName = dmnEngineName;</span>
<span class="nc" id="L658">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setDatabaseType(String databaseType) {
<span class="nc" id="L663">        this.databaseType = databaseType;</span>
<span class="nc" id="L664">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setDataSource(DataSource dataSource) {
<span class="nc" id="L669">        this.dataSource = dataSource;</span>
<span class="nc" id="L670">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setJdbcDriver(String jdbcDriver) {
<span class="nc" id="L675">        this.jdbcDriver = jdbcDriver;</span>
<span class="nc" id="L676">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setJdbcUrl(String jdbcUrl) {
<span class="nc" id="L681">        this.jdbcUrl = jdbcUrl;</span>
<span class="nc" id="L682">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setJdbcUsername(String jdbcUsername) {
<span class="nc" id="L687">        this.jdbcUsername = jdbcUsername;</span>
<span class="nc" id="L688">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setJdbcPassword(String jdbcPassword) {
<span class="nc" id="L693">        this.jdbcPassword = jdbcPassword;</span>
<span class="nc" id="L694">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setJdbcMaxActiveConnections(int jdbcMaxActiveConnections) {
<span class="nc" id="L699">        this.jdbcMaxActiveConnections = jdbcMaxActiveConnections;</span>
<span class="nc" id="L700">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setJdbcMaxIdleConnections(int jdbcMaxIdleConnections) {
<span class="nc" id="L705">        this.jdbcMaxIdleConnections = jdbcMaxIdleConnections;</span>
<span class="nc" id="L706">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setJdbcMaxCheckoutTime(int jdbcMaxCheckoutTime) {
<span class="nc" id="L711">        this.jdbcMaxCheckoutTime = jdbcMaxCheckoutTime;</span>
<span class="nc" id="L712">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setJdbcMaxWaitTime(int jdbcMaxWaitTime) {
<span class="nc" id="L717">        this.jdbcMaxWaitTime = jdbcMaxWaitTime;</span>
<span class="nc" id="L718">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setJdbcPingEnabled(boolean jdbcPingEnabled) {
<span class="nc" id="L723">        this.jdbcPingEnabled = jdbcPingEnabled;</span>
<span class="nc" id="L724">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setJdbcPingConnectionNotUsedFor(int jdbcPingConnectionNotUsedFor) {
<span class="nc" id="L729">        this.jdbcPingConnectionNotUsedFor = jdbcPingConnectionNotUsedFor;</span>
<span class="nc" id="L730">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setJdbcDefaultTransactionIsolationLevel(int jdbcDefaultTransactionIsolationLevel) {
<span class="nc" id="L735">        this.jdbcDefaultTransactionIsolationLevel = jdbcDefaultTransactionIsolationLevel;</span>
<span class="nc" id="L736">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setJdbcPingQuery(String jdbcPingQuery) {
<span class="nc" id="L741">        this.jdbcPingQuery = jdbcPingQuery;</span>
<span class="nc" id="L742">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setDataSourceJndiName(String dataSourceJndiName) {
<span class="nc" id="L747">        this.dataSourceJndiName = dataSourceJndiName;</span>
<span class="nc" id="L748">        return this;</span>
    }

    @Override
    public DmnManagementService getDmnManagementService() {
<span class="nc" id="L753">        return dmnManagementService;</span>
    }

    public DmnEngineConfiguration setDmnManagementService(DmnManagementService dmnManagementService) {
<span class="nc" id="L757">        this.dmnManagementService = dmnManagementService;</span>
<span class="nc" id="L758">        return this;</span>
    }

    @Override
    public DmnRepositoryService getDmnRepositoryService() {
<span class="nc" id="L763">        return dmnRepositoryService;</span>
    }

    public DmnEngineConfiguration setDmnRepositoryService(DmnRepositoryService dmnRepositoryService) {
<span class="nc" id="L767">        this.dmnRepositoryService = dmnRepositoryService;</span>
<span class="nc" id="L768">        return this;</span>
    }

    @Override
    public DmnDecisionService getDmnDecisionService() {
<span class="nc" id="L773">        return ruleService;</span>
    }

    public DmnEngineConfiguration setDmnRuleService(DmnDecisionService ruleService) {
<span class="nc" id="L777">        this.ruleService = ruleService;</span>
<span class="nc" id="L778">        return this;</span>
    }

    @Override
    public DmnHistoryService getDmnHistoryService() {
<span class="nc" id="L783">        return dmnHistoryService;</span>
    }

    public DmnEngineConfiguration setDmnHistoryService(DmnHistoryService dmnHistoryService) {
<span class="nc" id="L787">        this.dmnHistoryService = dmnHistoryService;</span>
<span class="nc" id="L788">        return this;</span>
    }

    public RuleEngineExecutor getRuleEngineExecutor() {
<span class="nc" id="L792">        return ruleEngineExecutor;</span>
    }

    public DmnEngineConfiguration setRuleEngineExecutor(RuleEngineExecutor ruleEngineExecutor) {
<span class="nc" id="L796">        this.ruleEngineExecutor = ruleEngineExecutor;</span>
<span class="nc" id="L797">        return this;</span>
    }

    public DeploymentManager getDeploymentManager() {
<span class="nc" id="L801">        return deploymentManager;</span>
    }

    public DmnEngineConfiguration getDmnEngineConfiguration() {
<span class="nc" id="L805">        return this;</span>
    }

    public ChangeTenantIdManager getChangeTenantIdManager() {
<span class="nc" id="L809">        return changeTenantIdManager;</span>
    }

    public DmnEngineConfiguration setChangeTenantIdManager(ChangeTenantIdManager changeTenantIdManager) {
<span class="nc" id="L813">        this.changeTenantIdManager = changeTenantIdManager;</span>
<span class="nc" id="L814">        return this;</span>
    }

    @Override
    public ExpressionManager getExpressionManager() {
<span class="nc" id="L819">        return expressionManager;</span>
    }

    @Override
    public DmnEngineConfiguration setExpressionManager(ExpressionManager expressionManager) {
<span class="nc" id="L824">        this.expressionManager = expressionManager;</span>
<span class="nc" id="L825">        return this;</span>
    }

    public Collection&lt;Consumer&lt;ExpressionManager&gt;&gt; getExpressionManagerConfigurers() {
<span class="nc" id="L829">        return expressionManagerConfigurers;</span>
    }

    @Override
    public AbstractEngineConfiguration addExpressionManagerConfigurer(Consumer&lt;ExpressionManager&gt; configurer) {
<span class="nc bnc" id="L834" title="All 2 branches missed.">        if (this.expressionManagerConfigurers == null) {</span>
<span class="nc" id="L835">            this.expressionManagerConfigurers = new ArrayList&lt;&gt;();</span>
        }
<span class="nc" id="L837">        this.expressionManagerConfigurers.add(configurer);</span>
<span class="nc" id="L838">        return this;</span>
    }

    public List&lt;FlowableFunctionDelegate&gt; getFlowableFunctionDelegates() {
<span class="nc" id="L842">        return flowableFunctionDelegates;</span>
    }

    public DmnEngineConfiguration setFlowableFunctionDelegates(List&lt;FlowableFunctionDelegate&gt; flowableFunctionDelegates) {
<span class="nc" id="L846">        this.flowableFunctionDelegates = flowableFunctionDelegates;</span>
<span class="nc" id="L847">        return this;</span>
    }

    public List&lt;FlowableFunctionDelegate&gt; getCustomFlowableFunctionDelegates() {
<span class="nc" id="L851">        return customFlowableFunctionDelegates;</span>
    }

    public DmnEngineConfiguration setCustomFlowableFunctionDelegates(List&lt;FlowableFunctionDelegate&gt; customFlowableFunctionDelegates) {
<span class="nc" id="L855">        this.customFlowableFunctionDelegates = customFlowableFunctionDelegates;</span>
<span class="nc" id="L856">        return this;</span>
    }

    public Collection&lt;ELResolver&gt; getPreDefaultELResolvers() {
<span class="nc" id="L860">        return preDefaultELResolvers;</span>
    }

    public DmnEngineConfiguration setPreDefaultELResolvers(Collection&lt;ELResolver&gt; preDefaultELResolvers) {
<span class="nc" id="L864">        this.preDefaultELResolvers = preDefaultELResolvers;</span>
<span class="nc" id="L865">        return this;</span>
    }

    public DmnEngineConfiguration addPreDefaultELResolver(ELResolver elResolver) {
<span class="nc bnc" id="L869" title="All 2 branches missed.">        if (this.preDefaultELResolvers == null) {</span>
<span class="nc" id="L870">            this.preDefaultELResolvers = new ArrayList&lt;&gt;();</span>
        }

<span class="nc" id="L873">        this.preDefaultELResolvers.add(elResolver);</span>
<span class="nc" id="L874">        return this;</span>
    }

    public Collection&lt;ELResolver&gt; getPreBeanELResolvers() {
<span class="nc" id="L878">        return preBeanELResolvers;</span>
    }

    public DmnEngineConfiguration setPreBeanELResolvers(Collection&lt;ELResolver&gt; preBeanELResolvers) {
<span class="nc" id="L882">        this.preBeanELResolvers = preBeanELResolvers;</span>
<span class="nc" id="L883">        return this;</span>
    }

    public DmnEngineConfiguration addPreBeanELResolver(ELResolver elResolver) {
<span class="nc bnc" id="L887" title="All 2 branches missed.">        if (this.preBeanELResolvers == null) {</span>
<span class="nc" id="L888">            this.preBeanELResolvers = new ArrayList&lt;&gt;();</span>
        }

<span class="nc" id="L891">        this.preBeanELResolvers.add(elResolver);</span>
<span class="nc" id="L892">        return this;</span>
    }

    public Collection&lt;ELResolver&gt; getPostDefaultELResolvers() {
<span class="nc" id="L896">        return postDefaultELResolvers;</span>
    }

    public DmnEngineConfiguration setPostDefaultELResolvers(Collection&lt;ELResolver&gt; postDefaultELResolvers) {
<span class="nc" id="L900">        this.postDefaultELResolvers = postDefaultELResolvers;</span>
<span class="nc" id="L901">        return this;</span>
    }

    public DmnEngineConfiguration addPostDefaultELResolver(ELResolver elResolver) {
<span class="nc bnc" id="L905" title="All 2 branches missed.">        if (this.postDefaultELResolvers == null) {</span>
<span class="nc" id="L906">            this.postDefaultELResolvers = new ArrayList&lt;&gt;();</span>
        }

<span class="nc" id="L909">        this.postDefaultELResolvers.add(elResolver);</span>
<span class="nc" id="L910">        return this;</span>
    }

    public DmnDeployer getDmnDeployer() {
<span class="nc" id="L914">        return dmnDeployer;</span>
    }

    public DmnEngineConfiguration setDmnDeployer(DmnDeployer dmnDeployer) {
<span class="nc" id="L918">        this.dmnDeployer = dmnDeployer;</span>
<span class="nc" id="L919">        return this;</span>
    }

    public DmnParseFactory getDmnParseFactory() {
<span class="nc" id="L923">        return dmnParseFactory;</span>
    }

    public DmnEngineConfiguration setDmnParseFactory(DmnParseFactory dmnParseFactory) {
<span class="nc" id="L927">        this.dmnParseFactory = dmnParseFactory;</span>
<span class="nc" id="L928">        return this;</span>
    }

    public boolean isHistoryEnabled() {
<span class="nc" id="L932">        return historyEnabled;</span>
    }

    public DmnEngineConfiguration setHistoryEnabled(boolean historyEnabled) {
<span class="nc" id="L936">        this.historyEnabled = historyEnabled;</span>
<span class="nc" id="L937">        return this;</span>
    }

    public int getDecisionCacheLimit() {
<span class="nc" id="L941">        return decisionCacheLimit;</span>
    }

    public DmnEngineConfiguration setDecisionCacheLimit(int decisionCacheLimit) {
<span class="nc" id="L945">        this.decisionCacheLimit = decisionCacheLimit;</span>
<span class="nc" id="L946">        return this;</span>
    }

    public DeploymentCache&lt;DecisionCacheEntry&gt; getDefinitionCache() {
<span class="nc" id="L950">        return definitionCache;</span>
    }

    public DmnEngineConfiguration setDefinitionCache(DeploymentCache&lt;DecisionCacheEntry&gt; definitionCache) {
<span class="nc" id="L954">        this.definitionCache = definitionCache;</span>
<span class="nc" id="L955">        return this;</span>
    }

    public DmnDeploymentDataManager getDeploymentDataManager() {
<span class="nc" id="L959">        return deploymentDataManager;</span>
    }

    public DmnEngineConfiguration setDeploymentDataManager(DmnDeploymentDataManager deploymentDataManager) {
<span class="nc" id="L963">        this.deploymentDataManager = deploymentDataManager;</span>
<span class="nc" id="L964">        return this;</span>
    }

    public DecisionDataManager getDecisionDataManager() {
<span class="nc" id="L968">        return decisionDataManager;</span>
    }

    public DmnEngineConfiguration setDecisionDataManager(DecisionDataManager decisionDataManager) {
<span class="nc" id="L972">        this.decisionDataManager = decisionDataManager;</span>
<span class="nc" id="L973">        return this;</span>
    }

    public DmnResourceDataManager getResourceDataManager() {
<span class="nc" id="L977">        return resourceDataManager;</span>
    }

    public DmnEngineConfiguration setResourceDataManager(DmnResourceDataManager resourceDataManager) {
<span class="nc" id="L981">        this.resourceDataManager = resourceDataManager;</span>
<span class="nc" id="L982">        return this;</span>
    }

    public HistoricDecisionExecutionDataManager getHistoricDecisionExecutionDataManager() {
<span class="nc" id="L986">        return historicDecisionExecutionDataManager;</span>
    }

    public DmnEngineConfiguration setHistoricDecisionExecutionDataManager(HistoricDecisionExecutionDataManager historicDecisionExecutionDataManager) {
<span class="nc" id="L990">        this.historicDecisionExecutionDataManager = historicDecisionExecutionDataManager;</span>
<span class="nc" id="L991">        return this;</span>
    }

    public DmnDeploymentEntityManager getDeploymentEntityManager() {
<span class="nc" id="L995">        return deploymentEntityManager;</span>
    }

    public DmnEngineConfiguration setDeploymentEntityManager(DmnDeploymentEntityManager deploymentEntityManager) {
<span class="nc" id="L999">        this.deploymentEntityManager = deploymentEntityManager;</span>
<span class="nc" id="L1000">        return this;</span>
    }

    public DecisionEntityManager getDecisionEntityManager() {
<span class="nc" id="L1004">        return decisionEntityManager;</span>
    }

    public DmnEngineConfiguration setDecisionEntityManager(DecisionEntityManager decisionEntityManager) {
<span class="nc" id="L1008">        this.decisionEntityManager = decisionEntityManager;</span>
<span class="nc" id="L1009">        return this;</span>
    }

    public HistoricDecisionExecutionEntityManager getHistoricDecisionExecutionEntityManager() {
<span class="nc" id="L1013">        return historicDecisionExecutionEntityManager;</span>
    }

    public DmnEngineConfiguration setHistoricDecisionExecutionEntityManager(HistoricDecisionExecutionEntityManager historicDecisionExecutionEntityManager) {
<span class="nc" id="L1017">        this.historicDecisionExecutionEntityManager = historicDecisionExecutionEntityManager;</span>
<span class="nc" id="L1018">        return this;</span>
    }

    public DmnResourceEntityManager getResourceEntityManager() {
<span class="nc" id="L1022">        return resourceEntityManager;</span>
    }

    public DmnEngineConfiguration setResourceEntityManager(DmnResourceEntityManager resourceEntityManager) {
<span class="nc" id="L1026">        this.resourceEntityManager = resourceEntityManager;</span>
<span class="nc" id="L1027">        return this;</span>
    }

    public DmnEngineAgendaFactory getDmnEngineAgendaFactory() {
<span class="nc" id="L1031">        return dmnEngineAgendaFactory;</span>
    }

    public DmnEngineConfiguration setDmnEngineAgendaFactory(DmnEngineAgendaFactory dmnEngineAgendaFactory) {
<span class="nc" id="L1035">        this.dmnEngineAgendaFactory = dmnEngineAgendaFactory;</span>
<span class="nc" id="L1036">        return this;</span>
    }

    @Override
    public TableDataManager getTableDataManager() {
<span class="nc" id="L1041">        return tableDataManager;</span>
    }

    @Override
    public DmnEngineConfiguration setTableDataManager(TableDataManager tableDataManager) {
<span class="nc" id="L1046">        this.tableDataManager = tableDataManager;</span>
<span class="nc" id="L1047">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setSqlSessionFactory(SqlSessionFactory sqlSessionFactory) {
<span class="nc" id="L1052">        this.sqlSessionFactory = sqlSessionFactory;</span>
<span class="nc" id="L1053">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setTransactionFactory(TransactionFactory transactionFactory) {
<span class="nc" id="L1058">        this.transactionFactory = transactionFactory;</span>
<span class="nc" id="L1059">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setCustomMybatisMappers(Set&lt;Class&lt;?&gt;&gt; customMybatisMappers) {
<span class="nc" id="L1064">        this.customMybatisMappers = customMybatisMappers;</span>
<span class="nc" id="L1065">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setCustomMybatisXMLMappers(Set&lt;String&gt; customMybatisXMLMappers) {
<span class="nc" id="L1070">        this.customMybatisXMLMappers = customMybatisXMLMappers;</span>
<span class="nc" id="L1071">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setCustomSessionFactories(List&lt;SessionFactory&gt; customSessionFactories) {
<span class="nc" id="L1076">        this.customSessionFactories = customSessionFactories;</span>
<span class="nc" id="L1077">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setUsingRelationalDatabase(boolean usingRelationalDatabase) {
<span class="nc" id="L1082">        this.usingRelationalDatabase = usingRelationalDatabase;</span>
<span class="nc" id="L1083">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setDatabaseTablePrefix(String databaseTablePrefix) {
<span class="nc" id="L1088">        this.databaseTablePrefix = databaseTablePrefix;</span>
<span class="nc" id="L1089">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setDatabaseCatalog(String databaseCatalog) {
<span class="nc" id="L1094">        this.databaseCatalog = databaseCatalog;</span>
<span class="nc" id="L1095">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setDatabaseSchema(String databaseSchema) {
<span class="nc" id="L1100">        this.databaseSchema = databaseSchema;</span>
<span class="nc" id="L1101">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setTablePrefixIsSchema(boolean tablePrefixIsSchema) {
<span class="nc" id="L1106">        this.tablePrefixIsSchema = tablePrefixIsSchema;</span>
<span class="nc" id="L1107">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setSessionFactories(Map&lt;Class&lt;?&gt;, SessionFactory&gt; sessionFactories) {
<span class="nc" id="L1112">        this.sessionFactories = sessionFactories;</span>
<span class="nc" id="L1113">        return this;</span>
    }

    public boolean isEnableSafeDmnXml() {
<span class="nc" id="L1117">        return enableSafeDmnXml;</span>
    }

    public DmnEngineConfiguration setEnableSafeDmnXml(boolean enableSafeDmnXml) {
<span class="nc" id="L1121">        this.enableSafeDmnXml = enableSafeDmnXml;</span>
<span class="nc" id="L1122">        return this;</span>
    }

    public boolean isStrictMode() {
<span class="nc" id="L1126">        return strictMode;</span>
    }

    public DmnEngineConfiguration setStrictMode(boolean strictMode) {
<span class="nc" id="L1130">        this.strictMode = strictMode;</span>
<span class="nc" id="L1131">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setClock(Clock clock) {
<span class="nc" id="L1136">        this.clock = clock;</span>
<span class="nc" id="L1137">        return this;</span>
    }

    @Override
    public DmnEngineConfiguration setDatabaseSchemaUpdate(String databaseSchemaUpdate) {
<span class="nc" id="L1142">        this.databaseSchemaUpdate = databaseSchemaUpdate;</span>
<span class="nc" id="L1143">        return this;</span>
    }

    public void setHitPolicyBehaviors(Map&lt;String, AbstractHitPolicy&gt; hitPolicyBehaviors) {
<span class="nc" id="L1147">        this.hitPolicyBehaviors = hitPolicyBehaviors;</span>
<span class="nc" id="L1148">    }</span>

    public Map&lt;String, AbstractHitPolicy&gt; getHitPolicyBehaviors() {
<span class="nc" id="L1151">        return hitPolicyBehaviors;</span>
    }

    public void setCustomHitPolicyBehaviors(Map&lt;String, AbstractHitPolicy&gt; customHitPolicyBehaviors) {
<span class="nc" id="L1155">        this.customHitPolicyBehaviors = customHitPolicyBehaviors;</span>
<span class="nc" id="L1156">    }</span>

    public Map&lt;String, AbstractHitPolicy&gt; getCustomHitPolicyBehaviors() {
<span class="nc" id="L1159">        return customHitPolicyBehaviors;</span>
    }

    public DecisionRequirementsDiagramGenerator getDecisionRequirementsDiagramGenerator() {
<span class="nc" id="L1163">        return decisionRequirementsDiagramGenerator;</span>
    }

    public DmnEngineConfiguration setDecisionRequirementsDiagramGenerator(DecisionRequirementsDiagramGenerator decisionRequirementsDiagramGenerator) {
<span class="nc" id="L1167">        this.decisionRequirementsDiagramGenerator = decisionRequirementsDiagramGenerator;</span>
<span class="nc" id="L1168">        return this;</span>
    }

    public boolean isCreateDiagramOnDeploy() {
<span class="nc" id="L1172">        return isCreateDiagramOnDeploy;</span>
    }

    public DmnEngineConfiguration setCreateDiagramOnDeploy(boolean isCreateDiagramOnDeploy) {
<span class="nc" id="L1176">        this.isCreateDiagramOnDeploy = isCreateDiagramOnDeploy;</span>
<span class="nc" id="L1177">        return this;</span>
    }

    public String getDecisionFontName() {
<span class="nc" id="L1181">        return decisionFontName;</span>
    }

    public DmnEngineConfiguration setDecisionFontName(String decisionFontName) {
<span class="nc" id="L1185">        this.decisionFontName = decisionFontName;</span>
<span class="nc" id="L1186">        return this;</span>
    }

    public String getLabelFontName() {
<span class="nc" id="L1190">        return labelFontName;</span>
    }

    public DmnEngineConfiguration setLabelFontName(String labelFontName) {
<span class="nc" id="L1194">        this.labelFontName = labelFontName;</span>
<span class="nc" id="L1195">        return this;</span>
    }

    public String getAnnotationFontName() {
<span class="nc" id="L1199">        return annotationFontName;</span>
    }

    public DmnEngineConfiguration setAnnotationFontName(String annotationFontName) {
<span class="nc" id="L1203">        this.annotationFontName = annotationFontName;</span>
<span class="nc" id="L1204">        return this;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>